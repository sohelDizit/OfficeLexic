(function(){function h(t){return typeof t=="string"&&(t=n.getElementById(t)),t}function t(n,t,r){if(i.addEventListener)n&&n.addEventListener(t,r,!1);else if(i.attachEvent){var u=function(){r.call(n,i.event)};n&&n.attachEvent("on"+t,u)}}function c(n,t){return n.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function l(n,t){c(n,t)||(n.className+=" "+t)}function f(n,t){var i=new RegExp("(\\s|^)"+t+"(\\s|$)");n.className=n.className.replace(i," ")}function a(n){var t,u,i,f,e=r(n);return t=e.left,i=e.top,u=t+n.offsetWidth,f=i+n.offsetHeight,{left:t,right:u,top:i,bottom:f}}function v(t){var i,r,u;return!t.pageX&&t.clientX?(i=1,r=document.body,r.getBoundingClientRect&&(u=r.getBoundingClientRect(),i=(u.right-u.left)/r.clientWidth),{x:t.clientX/i+n.body.scrollLeft+n.documentElement.scrollLeft,y:t.clientY/i+n.body.scrollTop+n.documentElement.scrollTop}):{x:t.pageX,y:t.pageY}}function o(n){return n.replace(/.*(\/|\\)/,"")}function s(n){return/[.]/.exec(n)?/[^.]+$/.exec(n.toLowerCase()):""}var n=document,i=window,u=function(){var t=n.createElement("div");return function(n){t.innerHTML=n;var i=t.childNodes[0];return t.removeChild(i),i}}(),r,e;r=document.documentElement.getBoundingClientRect?function(n){var f=n.getBoundingClientRect(),e=n.ownerDocument,i=e.body,r=e.documentElement,o=r.clientTop||i.clientTop||0,s=r.clientLeft||i.clientLeft||0,t=1,u,h,c;return i.getBoundingClientRect&&(u=i.getBoundingClientRect(),t=(u.right-u.left)/i.clientWidth),t>1&&(o=0,s=0),h=f.top/t+(window.pageYOffset||r&&r.scrollTop/t||i.scrollTop/t)-o,c=f.left/t+(window.pageXOffset||r&&r.scrollLeft/t||i.scrollLeft/t)-s,{top:h,left:c}}:function(n){if(i.jQuery)return jQuery(n).offset();var t=0,r=0;do t+=n.offsetTop||0,r+=n.offsetLeft||0;while(n=n.offsetParent);return{left:r,top:t}};e=function(){var n=0;return function(){return"ValumsAjaxUpload"+n++}}();Ajax_upload=AjaxUpload=function(t,i){var r,u;t.jquery?t=t[0]:typeof t=="string"&&/^#.*/.test(t)&&(t=t.slice(1));t=h(t);this._input=null;this._button=t;this._disabled=!1;this._submitting=!1;this._justClicked=!1;this._parentDialog=n.body;this._isInPopup=!1;window.jQuery&&jQuery.ui&&jQuery.ui.dialog&&(r=jQuery(this._button).parents(".ui-dialog"),r.length&&(this._parentDialog=r[0]));this._settings={action:"upload.php",name:"userfile",id:null,title:"",data:{},autoSubmit:!0,responseType:!1,onChange:function(){},onSubmit:function(){},onComplete:function(){}};for(u in i)this._settings[u]=i[u];this._settings.parentDialog&&(this._parentDialog=this._settings.parentDialog);this._settings.isInPopup&&(this._isInPopup=this._settings.isInPopup);this._createInput();this._rerouteClicks()};AjaxUpload.prototype={setData:function(n){this._settings.data=n},disable:function(){this._disabled=!0},enable:function(){this._disabled=!1},destroy:function(){this._input&&(this._input.parentNode&&this._input.parentNode.removeChild(this._input),this._input=null)},_createInput:function(){var r=this,i=n.createElement("input"),u,f;i.setAttribute("type","file");i.setAttribute("name",this._settings.name);i.setAttribute("class","fileuploadinput"+(this._settings.name==="userfile"?"":this._settings.name));i.setAttribute("title",this._settings.title);this._settings.accept&&i.setAttribute("accept",this._settings.accept);u={position:"absolute",margin:"-5px 0 0 -175px",padding:0,width:"220px",height:"30px",fontSize:"14px",opacity:0,cursor:"pointer",display:"none",zIndex:2147483583};for(f in u)i.style[f]=u[f];i.style.opacity==="0"||(i.style.filter="alpha(opacity=0)");this._parentDialog.appendChild?this._parentDialog.appendChild(i):this._parentDialog.append(i);t(i,"change",function(){r.justClicked=!1;var n=o(this.value);r._settings.onChange.call(r,n,s(n))!=!1&&r._settings.autoSubmit&&r.submit()});/safari/i.test(navigator.userAgent)&&!window.chrome&&t(i,"click",function(){r.justClicked=!0;setTimeout(function(){r.justClicked=!1},3e3)});this._input=i},_rerouteClicks:function(){var i=this,u,e={top:0,left:0},o=!1;t(i._button,"mouseover",function(){i._input&&!o&&(o=!0,u=a(i._button),i._parentDialog!=n.body&&(i._isInPopup?(e.top=jq(i._button).offset().top-jq(i._button).position().top,e.left=jq(i._button).offset().left-jq(i._button).position().left):e=r(i._parentDialog)))});t(document,"mousemove",function(n){var t=i._input,r;if(!t||!o){!t||o||t.style.display=="none"||i.justClicked||(t.style.display="none");return}if(i._disabled){f(i._button,"hover");t.style.display="none";return}r=v(n);r.x>=u.left&&r.x<=u.right&&r.y>=u.top&&r.y<=u.bottom?(t.style.top=r.y-e.top+"px",t.style.left=r.x-e.left+"px",t.style.display="block",l(i._button,"hover")):(o=!1,i.justClicked||(t.style.display="none"),f(i._button,"hover"))})},_createIframe:function(){var i=e(),t=u('<iframe src="javascript:false;" name="'+i+'" />');return t.id=i,t.style.display="none",n.body.appendChild(t),t},submit:function(){var h=this,u=this._settings,f,i,r,e;this._input.value!==""&&(f=o(this._input.value),u.onSubmit.call(this,f,s(f))==!1?(n.body.removeChild(this._input),this._input=null,this._createInput()):(i=this._createIframe(),r=this._createForm(i),r.appendChild(this._input),r.submit(),n.body.removeChild(r),r=null,this._input=null,this._createInput(),e=!1,t(i,"load",function(){var t,r;if(i.src=="javascript:'%3Chtml%3E%3C/html%3E';"||i.src=="javascript:'<html><\/html>';"){e&&setTimeout(function(){n.body.removeChild(i)},0);return}(t=i.contentDocument?i.contentDocument:frames[i.id].document,t.readyState&&t.readyState!="complete")||t.body&&t.body.innerHTML=="false"||t.body&&t.body.innerHTML==""||(t.XMLDocument?r=t.XMLDocument:t.body?(r=t.body.innerHTML,u.responseType&&u.responseType.toLowerCase()=="json"&&(t.body.firstChild&&t.body.firstChild.nodeName.toUpperCase()=="PRE"&&(r=t.body.firstChild.firstChild.nodeValue),r=r?window.eval("("+r+")"):{})):r=t,u.onComplete.call(h,f,r),e=!0,i.src="javascript:'<html><\/html>';")})))},_createForm:function(t){var f=this._settings,i=u('<form method="post" enctype="multipart/form-data"><\/form>'),e,r;i.style.display="none";i.action=f.action;i.target=t.name;n.body.appendChild(i);for(e in f.data)r=n.createElement("input"),r.type="hidden",r.name=e,r.value=f.data[e],i.appendChild(r);return i}}})();
jq(document).ready(function(){jq("#switcherSubscriptionButton").one("click",function(){jq("#subscriptionBlockContainer").hasClass("subsLoaded")||typeof CommonSubscriptionManager=="undefined"||typeof window.CommonSubscriptionManager.LoadSubscriptions!="function"||(window.CommonSubscriptionManager.LoadSubscriptions(),jq("#subscriptionBlockContainer").addClass("subsLoaded"))})});var CommonSubscriptionManager=new function(){var n,i,r,t;this.currentModuleSubsTab;this.currentModuleSubsSubtabContents;this.LoadSubscriptions=function(){AjaxPro.onLoading=function(n){n?LoadingBanner.displayLoading():LoadingBanner.hideLoading()};var n=AjaxPro.timeoutPeriod;AjaxPro.timeoutPeriod=3e5;AjaxPro.SubscriptionManager.GetAllSubscriptions(function(t){jq("#modules_notifySenders").html(jq("#headerSubscriptionsTemplate").tmpl(t.value));jq("#contents_notifySenders").html(jq("#contentSubscriptionsTemplate").tmpl(t.value));CommonSubscriptionManager.InitNotifyByComboboxes();CommonSubscriptionManager.InitListTabsComboboxes();AjaxPro.timeoutPeriod=n});jq(".subs-tabs .subs-module").on("click",function(){CommonSubscriptionManager.ClickProductTag(jq(this).attr("data-id"))})};this.SubscribeToWhatsNew=function(){AjaxPro.SubscriptionManager.SubscribeToWhatsNew(function(n){var t=n.value;t.rs1=="1"?jq("#studio_newSubscriptionButton").html(t.rs2):toastr.error(t.rs2)})};this.SubscribeToTipsAndTricks=function(){AjaxPro.SubscriptionManager.SubscribeToTipsAndTricks(function(n){var t=n.value;t.rs1=="1"?jq("#studio_tipsSubscriptionButton").html(t.rs2):toastr.error(t.rs2)})};this.SubscribeToSpam=function(){AjaxPro.SubscriptionManager.SubscribeToSpam(function(n){var t=n.value;t.rs1=="1"?jq("#studio_spamSubscriptionButton").html(t.rs2):toastr.error(t.rs2)})};this.SubscribeToAdminNotify=function(){AjaxPro.SubscriptionManager.SubscribeToAdminNotify(function(n){var t=n.value;t.rs1=="1"?jq("#studio_adminSubscriptionButton").html(t.rs2):toastr.error(t.rs2)})};n=function(n){var t=n.value,i;t.Status==1&&(i=jq("#studio_subscribeType_"+t.Data.Id+"_"+t.SubItemId+"_"+t.SubscriptionTypeID).find("a.on_off_button"),i.hasClass("on")?i.removeClass("on").addClass("off"):i.removeClass("off").addClass("on"))};i=function(n){var t=n.value,i;if(t.Status==1){if(jq("#content_product_subscribeBox_"+t.Data.Id).find(".subs-subtab").length){jq(".subs-tabs .subs-module.active").removeClass("active");jq(".subs-subtab .module.active").removeClass("active");jq("[id^='studio_subscriptions_"+t.Data.Id+"']").remove();CommonSubscriptionManager.ClickProductTag(t.Data.Id);return}jq("#content_product_subscribeBox_"+t.Data.Id).replaceWith(jq("#contentSubscriptionsTemplate").tmpl({Items:[t.Data]}));i=jq("#content_product_subscribeBox_"+t.Data.Id);i.addClass("active");CommonSubscriptionManager.InitNotifyByComboboxes();CommonSubscriptionManager.InitListTabsComboboxes()}else jq("#content_product_subscribeBox_"+t.ItemId).html('<div class="errorBox">'+t.Message+"<\/div>")};this.RememberCurrentModuleSubtab=function(n){var t=jq("#content_product_subscribeBox_"+n);t.find(".subs-subtab").length&&(CommonSubscriptionManager.currentModuleSubsTab=t.find(".subs-subtab .active").attr("id"),CommonSubscriptionManager.currentModuleSubsSubtabContents=t.find(".subs-subtab-contents .active").attr("id"))};this.UnsubscribeProduct=function(n,t){var r=ASC.Resources.Master.ResourceJS.UnsubscribeProductMessage.format(t);confirm(r)&&AjaxPro.SubscriptionManager.UnsubscribeProduct(n,i)};this.SubscribeType=function(t,i,r){var u=jq("#studio_subscribeType_"+t+"_"+i+"_"+r).find("a.on_off_button").hasClass("on");(!u||confirm(ASC.Resources.Master.ResourceJS.ConfirmMessage))&&(CommonSubscriptionManager.RememberCurrentModuleSubtab(t),u?AjaxPro.SubscriptionManager.UnsubscribeType(t,i,r,n):AjaxPro.SubscriptionManager.SubscribeType(t,i,r,n))};this.SubscribeObject=function(n,t,i,r){var u=jq(r).attr("data-value"),f=jq(r).hasClass("off");AjaxPro.SubscriptionManager.SubscribeObject(n,t,i,u,f,function(r){var o=r.value,e;o.rs1=="1"?(e=jq("#studio_subscribeItem_"+n+"_"+t+"_"+i+"_"+u).find("a"),f?e.removeClass("off").addClass("on"):e.removeClass("on").addClass("off")):jq("#studio_subscribeType_"+n+"_"+t+"_"+i).html(o.rs6)})};this.ClickProductTag=function(n){var t="product_subscribeBox_"+n,i,r,u,f;if(t!=jq(".subs-tabs .subs-module.active").attr("id")){if(jq(".subs-tabs .subs-module").removeClass("active"),jq("#"+t).addClass("active"),jq(".subs-contents div").removeClass("active"),jq("#content_"+t).addClass("active"),r=jq("#"+t).position().left+(jq("#"+t).width()-jq("#productSelector").width())/2,jq("#productSelector").css("left",r),jq("#content_"+t+" .subs-subtab select").length!=0){u=jq("#content_"+t+" .subs-subtab option");f=jq("#content_"+t+" .selected-item").attr("data-value");i=jq(u[f]).attr("data-id");jq("#content_"+t+" .subs-subtab select").on("change",function(){var i=jq("#content_"+t+" .subs-subtab option")[jq(this).val()],r=jq(i).attr("data-id");CommonSubscriptionManager.ClickModuleTag(n,r)})}else i=jq("#content_"+t+" .subs-subtab span").first().attr("data-id");CommonSubscriptionManager.ClickModuleTag(n,i)}};this.ClickModuleTag=function(n,t){var i="module_subscribeBox_"+n+"_"+t,r;i!=jq(".subs-subtab .module.active").attr("id")&&(jq(".subs-subtab .module").removeClass("active"),jq("#"+i).addClass("active"),jq(".subs-subtab-contents div").removeClass("active"),jq("#content_"+i).addClass("active"));r=jq("#content_"+i).children(".subs-sections");jq(r).each(function(){var i=jq(this).attr("data-type"),r="studio_subscriptions_"+n+"_"+t+"_"+i,u=jq("#"+r);(u==null||u.attr("id")==null)&&AjaxPro.SubscriptionManager.RenderGroupItemSubscriptions(n,t,i,function(u){var e=jq("#studio_types_"+n+"_"+t+"_"+i),f="";(u.value.Status=1)&&(f=jq("<div><\/div>").html(jq("#subscribtionObjectsTemplate").tmpl(u.value)).html());(f==null||""==f)&&(f="<div id='"+r+"' style='height: 0px;'>&nbsp<\/div>");e.html(f)})})};this.InitNotifyByComboboxes=function(){jq(".subsSelector").each(function(){var n=jq(this),e=parseInt(n.attr("data-notify")),i,u,o,f;if(e){i=n.attr("data-id");u=n.attr("data-function");n.removeAttr("data-id").removeAttr("data-notify").removeAttr("data-function");o=i?function(){AjaxPro.SubscriptionManager[u](i,t(n))}:function(){AjaxPro.SubscriptionManager[u](t(n))};n.html(jq("#subsSelectorTemplate").tmpl({type:e}));n.find('input[type="checkbox"]').on("change",o);f=n.find(".baseLinkAction");f.hasClass("tgConnector")&&r.init(f)}})};this.InitListTabsComboboxes=function(){jq('select[id^="ListTabsCombobox_"]').each(function(){jq(this).tlcombobox({align:"left"})})};r=function(){function h(n,t){LoadingBanner.hideLoading();toastr.error(t[0])}function p(){v.addClass("display-none");y.addClass("display-none");i.addClass("display-none");e.addClass("display-none");r.addClass("display-none")}function w(n){o=n;for(var t=0;t<f.length;t++)f[t].children("span").toggleClass("display-none",n),f[t].parent().children("input").toggleClass("display-none",!n);v.toggleClass("display-none",n);y.toggleClass("display-none",!n);i.toggleClass("display-none",n);e.toggleClass("display-none",n&&ASC.Clipboard.enable);r.toggleClass("display-none",!n)}function g(n){o!=undefined&&(n.children("span").toggleClass("display-none",o),n.parent().children("input").toggleClass("display-none",!o))}function nt(){Teamlab.telegramLink({success:it,error:h})}function b(n){Teamlab.telegramIsConnected({success:n?function(n,t){w(t==1)}:c,error:h})}function tt(){LoadingBanner.displayLoading();Teamlab.telegramDisconnect({success:function(){r.off("click");c(null,0)},error:h})}function it(n,t){u&&ASC.Clipboard.destroy(u);i.on("click",k);if(ASC.Clipboard.enable){e.on("click",k);u=ASC.Clipboard.create(t,"tgCopy",{onComplete:function(){toastr.success(ASC.Resources.Master.ResourceJS.LinkCopySuccess)}})}i.children("a").attr("href","https://"+t).text(t.slice(0,30)+"...")}function c(n,i){if(w(i==1),LoadingBanner.hideLoading(),i!=1)nt(),i==2&&(t=l());else{u&&ASC.Clipboard.destroy(u);r.on("click",tt)}}function l(){return setTimeout(Teamlab.telegramIsConnected,1500,{success:rt})}function rt(n,i){i!=2?c(n,i):t=l()}function k(){i.off("click");e.off("click");t||(t=l())}function d(){s.off("click.tgConnect");r.off("click");t&&clearTimeout(t)}function ut(t){f.push(t);t.removeAttr("data-value");t.on("click",function(t){t.stopPropagation(!0);var u=jq(window).height(),i=t.pageY+jq(t.target).height(),r=u-(i-jq(window).scrollTop()+n.height()+parseInt(n.css("padding-top"))*2);if(i=r>=0?i:i+r,n.css({position:"absolute",left:t.pageX,top:i-10}).toggleClass("display-none"),n.hasClass("display-none"))d();else{p();LoadingBanner.displayLoading();b();s.on("click.tgConnect",function(t){jq(t.target).parents("#telegramConnect").length||(n.addClass("display-none"),d())})}});(g(t),a)||(a=!0,p(),n.appendTo(s),b(!0))}var a=!1,f=[],n=jq("#telegramConnectTemplate").tmpl(),s=jq("body"),v=n.children("#tgConnect"),y=n.children("#tgConnected"),i=n.children("#tgLink"),e=n.children("#tgCopy"),r=n.children("#tgDisconnect"),u,t,o;return{init:ut}}();t=function(n){var t=0;return n.find('input[type="checkbox"]').each(function(){var i=jq(this),n;i.prop("checked")&&(n=parseInt(jq(this).attr("data-value")),t|=n)}),t}};
jq(document).ready(function(){jq("#switcherConnectionsButton").one("click",function(){jq("#connectionsBlockContainer").hasClass("connectionsLoaded")||typeof CommonConnectionsManager=="undefined"||typeof window.CommonConnectionsManager.LoadActiveConnections!="function"||(window.CommonConnectionsManager.LoadActiveConnections(),jq("#connectionsBlockContainer").addClass("connectionsLoaded"))})});CommonConnectionsManager=new function(){var n=[],i,t;this.LoadActiveConnections=function(){Teamlab.getLoginEventsForProfile({},{success:function(n,t){jq("#connections_list").html(jq("#contentConnectionsTemplate").tmpl(t))},error:function(){t()}})};this.OpenLogoutAllPopupDialog=function(){StudioBlockUIManager.blockUI("#confirmLogout",600);PopupKeyUpActionProvider.ClearActions()};this.OpenLogoutActiveConnectionPopupDialog=function(t,r,u,f){n=[t,r,u,f];u||(u=i());f||(f=i());jq("#confirmLogoutFromConnectionText").text(ASC.Resources.Master.ResourceJS.ConfirmLogoutFrom.format(u,f)+"?");StudioBlockUIManager.blockUI("#confirmLogoutConnection",420);PopupKeyUpActionProvider.ClearActions()};this.CloseLogOutAllActiveConnectionsChangePassword=function(){PopupKeyUpActionProvider.ClearActions();jq.unblockUI();Teamlab.logoutAllActiveConnectionsWithChangePassword({},{success:function(n,i){i?window.location.href=i:t()},error:function(){t()}})};this.CloseLogoutFromAllActiveConnectionsExceptThis=function(){PopupKeyUpActionProvider.ClearActions();jq.unblockUI();Teamlab.logoutAllActiveConnectionsExceptThis({},{success:function(n,i){i?window.location.reload(!0):t()},error:function(){t()}})};this.CloseLogoutActiveConnection=function(){PopupKeyUpActionProvider.ClearActions();jq.unblockUI();Teamlab.logoutActiveConnection({},n[0],{success:function(r,u){u?(n[2]||(n[2]=i()),n[3]||(n[3]=i()),toastr.success(ASC.Resources.Master.ResourceJS.ActiveConnectionWasLoggedOut.format(n[2],n[3])),jq("#connection_content_"+n[0]).hide()):t()},error:function(){t()}})};i=function(){return ASC.Resources.Master.ResourceJS.Unknown};t=function(){toastr.error(ASC.Resources.Master.ResourceJS.OperationFailedError)};this.GetDisplayDateTime=function(n){var u=new Date(Date.parse(n)),i=ServiceFactory.getDisplayDate(u),e=ServiceFactory.getDisplayTime(u),r=new Date,t=new Date,f;return t.setDate(t.getDate()-1),r=ServiceFactory.getDisplayDate(r),t=ServiceFactory.getDisplayDate(t),f=r==i?ASC.Resources.Master.ResourceJS.Today:t==i?ASC.Resources.Master.ResourceJS.Yesterday:i,f+", "+e}};
/*!
 * Socket.IO v2.2.0
 * (c) 2014-2018 Guillermo Rauch
 * Released under the MIT License.
 */
!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.io=t():n.io=t()}(this,function(){return function(n){function t(r){if(i[r])return i[r].exports;var u=i[r]={exports:{},id:r,loaded:!1};return n[r].call(u.exports,u,u.exports,t),u.loaded=!0,u.exports}var i={};return t.m=n,t.c=i,t.p="",t(0)}([function(n,t,i){"use strict";function u(n,t){"object"===("undefined"==typeof n?"undefined":o(n))&&(t=n,n=void 0);t=t||{};var c,i=s(n),h=i.source,u=i.id,l=i.path,a=r[u]&&l in r[u].nsps,v=t.forceNew||t["force new connection"]||!1===t.multiplex||a;return v?(e("ignoring socket cache for %s",h),c=f(h,t)):(r[u]||(e("new io instance for %s",h),r[u]=f(h,t)),c=r[u]),i.query&&!t.query&&(t.query=i.query),c.socket(i.path,t)}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},s=i(1),h=i(7),f=i(12),e=i(3)("socket.io-client"),r;n.exports=t=u;r=t.managers={};t.protocol=h.protocol;t.connect=u;t.Manager=i(12);t.Socket=i(36)},function(n,t,i){"use strict";function u(n,t){var i=n,e,u;return t=t||"undefined"!=typeof location&&location,null==n&&(n=t.protocol+"//"+t.host),"string"==typeof n&&("/"===n.charAt(0)&&(n="/"===n.charAt(1)?t.protocol+n:t.host+n),/^(https?|wss?):\/\//.test(n)||(r("protocol-less url %s",n),n="undefined"!=typeof t?t.protocol+"//"+n:"https://"+n),r("parse %s",n),i=f(n)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/",e=i.host.indexOf(":")!==-1,u=e?"["+i.host+"]":i.host,i.id=i.protocol+"://"+u+":"+i.port,i.href=i.protocol+"://"+u+(t&&t.port===i.port?"":":"+i.port),i}var f=i(2),r=i(3)("socket.io-client:url");n.exports=u},function(n){var t=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];n.exports=function(n){var o=n,u=n.indexOf("["),f=n.indexOf("]");u!=-1&&f!=-1&&(n=n.substring(0,u)+n.substring(u,f).replace(/:/g,";")+n.substring(f,n.length));for(var s=t.exec(n||""),r={},e=14;e--;)r[i[e]]=s[e]||"";return u!=-1&&f!=-1&&(r.source=o,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r}},function(n,t,i){(function(r){function f(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function e(n){var i=this.useColors,r,u,f;(n[0]=(i?"%c":"")+this.namespace+(i?" %c":" ")+n[0]+(i?"%c ":" ")+"+"+t.humanize(this.diff),i)&&(r="color: "+this.color,n.splice(1,0,r,"color: inherit"),u=0,f=0,n[0].replace(/%[a-zA-Z%]/g,function(n){"%%"!==n&&(u++,"%c"===n&&(f=u))}),n.splice(f,0,r))}function o(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(n){try{null==n?t.storage.removeItem("debug"):t.storage.debug=n}catch(i){}}function u(){var n;try{n=t.storage.debug}catch(i){}return!n&&"undefined"!=typeof r&&"env"in r&&(n=r.env.DEBUG),n}function h(){try{return window.localStorage}catch(n){}}t=n.exports=i(5);t.log=o;t.formatArgs=e;t.save=s;t.load=u;t.useColors=f;t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:h();t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];t.formatters.j=function(n){try{return JSON.stringify(n)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}};t.enable(u())}).call(t,i(4))},function(n){function h(){throw new Error("setTimeout has not been defined");}function c(){throw new Error("clearTimeout has not been defined");}function l(n){if(r===setTimeout)return setTimeout(n,0);if((r===h||!r)&&setTimeout)return r=setTimeout,setTimeout(n,0);try{return r(n,0)}catch(t){try{return r.call(null,n,0)}catch(t){return r.call(this,n,0)}}}function y(n){if(u===clearTimeout)return clearTimeout(n);if((u===c||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(n);try{return u(n)}catch(t){try{return u.call(null,n)}catch(t){return u.call(this,n)}}}function p(){o&&e&&(o=!1,e.length?f=e.concat(f):s=-1,f.length&&a())}function a(){var t,n;if(!o){for(t=l(p),o=!0,n=f.length;n;){for(e=f,f=[];++s<n;)e&&e[s].run();s=-1;n=f.length}e=null;o=!1;y(t)}}function v(n,t){this.fun=n;this.array=t}function i(){}var r,u,t=n.exports={};!function(){try{r="function"==typeof setTimeout?setTimeout:h}catch(n){r=h}try{u="function"==typeof clearTimeout?clearTimeout:c}catch(n){u=c}}();var e,f=[],o=!1,s=-1;t.nextTick=function(n){var i=new Array(arguments.length-1),t;if(arguments.length>1)for(t=1;t<arguments.length;t++)i[t-1]=arguments[t];f.push(new v(n,i));1!==f.length||o||l(a)};v.prototype.run=function(){this.fun.apply(null,this.array)};t.title="browser";t.browser=!0;t.env={};t.argv=[];t.version="";t.versions={};t.on=i;t.addListener=i;t.once=i;t.off=i;t.removeListener=i;t.removeAllListeners=i;t.emit=i;t.prependListener=i;t.prependOnceListener=i;t.listeners=function(){return[]};t.binding=function(){throw new Error("process.binding is not supported");};t.cwd=function(){return"/"};t.chdir=function(){throw new Error("process.chdir is not supported");};t.umask=function(){return 0}},function(n,t,i){function u(n){var r,i=0;for(r in n)i=(i<<5)-i+n.charCodeAt(r),i|=0;return t.colors[Math.abs(i)%t.colors.length]}function r(n){function i(){var n,f,e,s;if(i.enabled){var u=i,o=+new Date,h=o-(r||o);for(u.diff=h,u.prev=r,u.curr=o,r=o,n=new Array(arguments.length),f=0;f<n.length;f++)n[f]=arguments[f];n[0]=t.coerce(n[0]);"string"!=typeof n[0]&&n.unshift("%O");e=0;n[0]=n[0].replace(/%([a-zA-Z%])/g,function(i,r){var f,o;return"%%"===i?i:(e++,f=t.formatters[r],"function"==typeof f&&(o=n[e],i=f.call(u,o),n.splice(e,1),e--),i)});t.formatArgs.call(u,n);s=i.log||t.log||console.log.bind(console);s.apply(u,n)}}var r;return i.namespace=n,i.enabled=t.enabled(n),i.useColors=t.useColors(),i.color=u(n),i.destroy=f,"function"==typeof t.init&&t.init(i),t.instances.push(i),i}function f(){var n=t.instances.indexOf(this);return n!==-1&&(t.instances.splice(n,1),!0)}function e(n){var i,r,f,u;for(t.save(n),t.names=[],t.skips=[],r=("string"==typeof n?n:"").split(/[\s,]+/),f=r.length,i=0;i<f;i++)r[i]&&(n=r[i].replace(/\*/g,".*?"),"-"===n[0]?t.skips.push(new RegExp("^"+n.substr(1)+"$")):t.names.push(new RegExp("^"+n+"$")));for(i=0;i<t.instances.length;i++)u=t.instances[i],u.enabled=t.enabled(u.namespace)}function o(){t.enable("")}function s(n){if("*"===n[n.length-1])return!0;for(var i=0,r=t.skips.length;i<r;i++)if(t.skips[i].test(n))return!1;for(i=0,r=t.names.length;i<r;i++)if(t.names[i].test(n))return!0;return!1}function h(n){return n instanceof Error?n.stack||n.message:n}t=n.exports=r.debug=r["default"]=r;t.coerce=h;t.disable=o;t.enable=e;t.enabled=s;t.humanize=i(6);t.instances=[];t.names=[];t.skips=[];t.formatters={}},function(n){function e(n){var e,f,o;if((n=String(n),!(n.length>100))&&(e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(n),e)){f=parseFloat(e[1]);o=(e[2]||"ms").toLowerCase();switch(o){case"years":case"year":case"yrs":case"yr":case"y":return f*h;case"days":case"day":case"d":return f*u;case"hours":case"hour":case"hrs":case"hr":case"h":return f*r;case"minutes":case"minute":case"mins":case"min":case"m":return f*i;case"seconds":case"second":case"secs":case"sec":case"s":return f*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return f;default:return}}}function o(n){return n>=u?Math.round(n/u)+"d":n>=r?Math.round(n/r)+"h":n>=i?Math.round(n/i)+"m":n>=t?Math.round(n/t)+"s":n+"ms"}function s(n){return f(n,u,"day")||f(n,r,"hour")||f(n,i,"minute")||f(n,t,"second")||n+" ms"}function f(n,t,i){if(!(n<t))return n<1.5*t?Math.floor(n/t)+" "+i:Math.ceil(n/t)+" "+i+"s"}var t=1e3,i=60*t,r=60*i,u=24*r,h=365.25*u;n.exports=function(n,t){t=t||{};var i=typeof n;if("string"===i&&n.length>0)return e(n);if("number"===i&&isNaN(n)===!1)return t.long?s(n):o(n);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(n));}},function(n,t,i){function o(){}function s(n){var i=""+n.type,r;if(t.BINARY_EVENT!==n.type&&t.BINARY_ACK!==n.type||(i+=n.attachments+"-"),n.nsp&&"/"!==n.nsp&&(i+=n.nsp+","),null!=n.id&&(i+=n.id),null!=n.data){if(r=l(n.data),r===!1)return c;i+=r}return f("encoded %j as %s",n,i),i}function l(n){try{return JSON.stringify(n)}catch(t){return!1}}function a(n,t){function i(n){var i=e.deconstructPacket(n),u=s(i.packet),r=i.buffers;r.unshift(u);t(r)}e.removeBlobs(n,i)}function r(){this.reconstructor=null}function v(n){var i=0,r={type:Number(n.charAt(0))},e,o,u,s,c;if(null==t.types[r.type])return h("unknown packet type "+r.type);if(t.BINARY_EVENT===r.type||t.BINARY_ACK===r.type){for(e="";"-"!==n.charAt(++i)&&(e+=n.charAt(i),i!=n.length););if(e!=Number(e)||"-"!==n.charAt(i))throw new Error("Illegal attachments");r.attachments=Number(e)}if("/"===n.charAt(i+1))for(r.nsp="";++i;){if(u=n.charAt(i),","===u)break;if(r.nsp+=u,i===n.length)break}else r.nsp="/";if(o=n.charAt(i+1),""!==o&&Number(o)==o){for(r.id="";++i;){if(u=n.charAt(i),null==u||Number(u)!=u){--i;break}if(r.id+=n.charAt(i),i===n.length)break}r.id=Number(r.id)}if(n.charAt(++i)){if(s=y(n.substr(i)),c=s!==!1&&(r.type===t.ERROR||w(s)),!c)return h("invalid payload");r.data=s}return f("decoded %s as %j",n,r),r}function y(n){try{return JSON.parse(n)}catch(t){return!1}}function u(n){this.reconPack=n;this.buffers=[]}function h(n){return{type:t.ERROR,data:"parser error: "+n}}var f=i(3)("socket.io-parser"),p=i(8),e=i(9),w=i(10),b=i(11),c;t.protocol=4;t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"];t.CONNECT=0;t.DISCONNECT=1;t.EVENT=2;t.ACK=3;t.ERROR=4;t.BINARY_EVENT=5;t.BINARY_ACK=6;t.Encoder=o;t.Decoder=r;c=t.ERROR+'"encode error"';o.prototype.encode=function(n,i){if(f("encoding packet %j",n),t.BINARY_EVENT===n.type||t.BINARY_ACK===n.type)a(n,i);else{var r=s(n);i([r])}};p(r.prototype);r.prototype.add=function(n){var i;if("string"==typeof n)i=v(n),t.BINARY_EVENT===i.type||t.BINARY_ACK===i.type?(this.reconstructor=new u(i),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",i)):this.emit("decoded",i);else{if(!b(n)&&!n.base64)throw new Error("Unknown type: "+n);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");i=this.reconstructor.takeBinaryData(n);i&&(this.reconstructor=null,this.emit("decoded",i))}};r.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()};u.prototype.takeBinaryData=function(n){if(this.buffers.push(n),this.buffers.length===this.reconPack.attachments){var t=e.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null};u.prototype.finishedReconstruction=function(){this.reconPack=null;this.buffers=[]}},function(n){function t(n){if(n)return i(n)}function i(n){for(var i in t.prototype)n[i]=t.prototype[i];return n}n.exports=t;t.prototype.on=t.prototype.addEventListener=function(n,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(t),this};t.prototype.once=function(n,t){function i(){this.off(n,i);t.apply(this,arguments)}return i.fn=t,this.on(n,i),this};t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(n,t){var i,u,r;if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;if(i=this._callbacks["$"+n],!i)return this;if(1==arguments.length)return delete this._callbacks["$"+n],this;for(r=0;r<i.length;r++)if(u=i[r],u===t||u.fn===t){i.splice(r,1);break}return this};t.prototype.emit=function(n){var r,t,i,u;if(this._callbacks=this._callbacks||{},r=[].slice.call(arguments,1),t=this._callbacks["$"+n],t)for(t=t.slice(0),i=0,u=t.length;i<u;++i)t[i].apply(this,r);return this};t.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]};t.prototype.hasListeners=function(n){return!!this.listeners(n).length}},function(n,t,i){function r(n,t){var s,u,i,o;if(!n)return n;if(e(n))return s={_placeholder:!0,num:t.length},t.push(n),s;if(f(n)){for(i=new Array(n.length),u=0;u<n.length;u++)i[u]=r(n[u],t);return i}if("object"==typeof n&&!(n instanceof Date)){i={};for(o in n)i[o]=r(n[o],t);return i}return n}function u(n,t){var i,r;if(!n)return n;if(n&&n._placeholder)return t[n.num];if(f(n))for(i=0;i<n.length;i++)n[i]=u(n[i],t);else if("object"==typeof n)for(r in n)n[r]=u(n[r],t);return n}var f=i(10),e=i(11),o=Object.prototype.toString,s="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===o.call(Blob),h="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===o.call(File);t.deconstructPacket=function(n){var t=[],u=n.data,i=n;return i.data=r(u,t),i.attachments=t.length,{packet:i,buffers:t}};t.reconstructPacket=function(n,t){return n.data=u(n.data,t),n.attachments=void 0,n};t.removeBlobs=function(n,t){function r(n,o,c){var a,l,v;if(!n)return n;if(s&&n instanceof Blob||h&&n instanceof File)u++,a=new FileReader,a.onload=function(){c?c[o]=this.result:i=this.result;--u||t(i)},a.readAsArrayBuffer(n);else if(f(n))for(l=0;l<n.length;l++)r(n[l],l,n);else if("object"==typeof n&&!e(n))for(v in n)r(n[v],v,n)}var u=0,i=n;r(i);u||t(i)}},function(n){var t={}.toString;n.exports=Array.isArray||function(n){return"[object Array]"==t.call(n)}},function(n){function t(n){return i&&Buffer.isBuffer(n)||r&&(n instanceof ArrayBuffer||u(n))}n.exports=t;var i="function"==typeof Buffer&&"function"==typeof Buffer.isBuffer,r="function"==typeof ArrayBuffer,u=function(n){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(n):n.buffer instanceof ArrayBuffer}},function(n,t,i){"use strict";function r(n,t){if(!(this instanceof r))return new r(n,t);n&&"object"===("undefined"==typeof n?"undefined":h(n))&&(t=n,n=void 0);t=t||{};t.path=t.path||"/socket.io";this.nsps={};this.subs=[];this.opts=t;this.reconnection(t.reconnection!==!1);this.reconnectionAttempts(t.reconnectionAttempts||1/0);this.reconnectionDelay(t.reconnectionDelay||1e3);this.reconnectionDelayMax(t.reconnectionDelayMax||5e3);this.randomizationFactor(t.randomizationFactor||.5);this.backoff=new y({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()});this.timeout(null==t.timeout?2e4:t.timeout);this.readyState="closed";this.uri=n;this.connecting=[];this.lastPing=null;this.encoding=!1;this.packetBuffer=[];var i=t.parser||v;this.encoder=new i.Encoder;this.decoder=new i.Decoder;this.autoConnect=t.autoConnect!==!1;this.autoConnect&&this.open()}var h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},c=i(13),l=i(36),a=i(8),v=i(7),f=i(38),e=i(39),u=i(3)("socket.io-client:manager"),o=i(35),y=i(40),s=Object.prototype.hasOwnProperty;n.exports=r;r.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var n in this.nsps)s.call(this.nsps,n)&&this.nsps[n].emit.apply(this.nsps[n],arguments)};r.prototype.updateSocketIds=function(){for(var n in this.nsps)s.call(this.nsps,n)&&(this.nsps[n].id=this.generateId(n))};r.prototype.generateId=function(n){return("/"===n?"":n+"#")+this.engine.id};a(r.prototype);r.prototype.reconnection=function(n){return arguments.length?(this._reconnection=!!n,this):this._reconnection};r.prototype.reconnectionAttempts=function(n){return arguments.length?(this._reconnectionAttempts=n,this):this._reconnectionAttempts};r.prototype.reconnectionDelay=function(n){return arguments.length?(this._reconnectionDelay=n,this.backoff&&this.backoff.setMin(n),this):this._reconnectionDelay};r.prototype.randomizationFactor=function(n){return arguments.length?(this._randomizationFactor=n,this.backoff&&this.backoff.setJitter(n),this):this._randomizationFactor};r.prototype.reconnectionDelayMax=function(n){return arguments.length?(this._reconnectionDelayMax=n,this.backoff&&this.backoff.setMax(n),this):this._reconnectionDelayMax};r.prototype.timeout=function(n){return arguments.length?(this._timeout=n,this):this._timeout};r.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()};r.prototype.open=r.prototype.connect=function(n){var i,t,e,o,r,s;return(u("readyState %s",this.readyState),~this.readyState.indexOf("open"))?this:(u("opening %s",this.uri),this.engine=c(this.uri,this.opts),i=this.engine,t=this,this.readyState="opening",this.skipReconnect=!1,e=f(i,"open",function(){t.onopen();n&&n()}),o=f(i,"error",function(i){if(u("connect_error"),t.cleanup(),t.readyState="closed",t.emitAll("connect_error",i),n){var r=new Error("Connection error");r.data=i;n(r)}else t.maybeReconnectOnOpen()}),!1!==this._timeout&&(r=this._timeout,u("connect attempt will timeout after %d",r),s=setTimeout(function(){u("connect attempt timed out after %d",r);e.destroy();i.close();i.emit("error","timeout");t.emitAll("connect_timeout",r)},r),this.subs.push({destroy:function(){clearTimeout(s)}})),this.subs.push(e),this.subs.push(o),this)};r.prototype.onopen=function(){u("open");this.cleanup();this.readyState="open";this.emit("open");var n=this.engine;this.subs.push(f(n,"data",e(this,"ondata")));this.subs.push(f(n,"ping",e(this,"onping")));this.subs.push(f(n,"pong",e(this,"onpong")));this.subs.push(f(n,"error",e(this,"onerror")));this.subs.push(f(n,"close",e(this,"onclose")));this.subs.push(f(this.decoder,"decoded",e(this,"ondecoded")))};r.prototype.onping=function(){this.lastPing=new Date;this.emitAll("ping")};r.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)};r.prototype.ondata=function(n){this.decoder.add(n)};r.prototype.ondecoded=function(n){this.emit("packet",n)};r.prototype.onerror=function(n){u("error",n);this.emitAll("error",n)};r.prototype.socket=function(n,t){function u(){~o(r.connecting,i)||r.connecting.push(i)}var i=this.nsps[n],r;return i||(i=new l(this,n,t),this.nsps[n]=i,r=this,i.on("connecting",u),i.on("connect",function(){i.id=r.generateId(n)}),this.autoConnect&&u()),i};r.prototype.destroy=function(n){var t=o(this.connecting,n);~t&&this.connecting.splice(t,1);this.connecting.length||this.close()};r.prototype.packet=function(n){u("writing packet %j",n);var t=this;n.query&&0===n.type&&(n.nsp+="?"+n.query);t.encoding?t.packetBuffer.push(n):(t.encoding=!0,this.encoder.encode(n,function(i){for(var r=0;r<i.length;r++)t.engine.write(i[r],n.options);t.encoding=!1;t.processPacketQueue()}))};r.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var n=this.packetBuffer.shift();this.packet(n)}};r.prototype.cleanup=function(){var t,n,i;for(u("cleanup"),t=this.subs.length,n=0;n<t;n++)i=this.subs.shift(),i.destroy();this.packetBuffer=[];this.encoding=!1;this.lastPing=null;this.decoder.destroy()};r.prototype.close=r.prototype.disconnect=function(){u("disconnect");this.skipReconnect=!0;this.reconnecting=!1;"opening"===this.readyState&&this.cleanup();this.backoff.reset();this.readyState="closed";this.engine&&this.engine.close()};r.prototype.onclose=function(n){u("onclose");this.cleanup();this.backoff.reset();this.readyState="closed";this.emit("close",n);this._reconnection&&!this.skipReconnect&&this.reconnect()};r.prototype.reconnect=function(){var n,t,i;if(this.reconnecting||this.skipReconnect)return this;n=this;this.backoff.attempts>=this._reconnectionAttempts?(u("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1):(t=this.backoff.duration(),u("will wait %dms before reconnect attempt",t),this.reconnecting=!0,i=setTimeout(function(){n.skipReconnect||(u("attempting reconnect"),n.emitAll("reconnect_attempt",n.backoff.attempts),n.emitAll("reconnecting",n.backoff.attempts),n.skipReconnect||n.open(function(t){t?(u("reconnect attempt error"),n.reconnecting=!1,n.reconnect(),n.emitAll("reconnect_error",t.data)):(u("reconnect success"),n.onreconnect())}))},t),this.subs.push({destroy:function(){clearTimeout(i)}}))};r.prototype.onreconnect=function(){var n=this.backoff.attempts;this.reconnecting=!1;this.backoff.reset();this.updateSocketIds();this.emitAll("reconnect",n)}},function(n,t,i){n.exports=i(14);n.exports.parser=i(21)},function(n,t,i){function r(n,t){return this instanceof r?(t=t||{},n&&"object"==typeof n&&(t=n,n=null),n?(n=e(n),t.hostname=n.host,t.secure="https"===n.protocol||"wss"===n.protocol,t.port=n.port,n.query&&(t.query=n.query)):t.host&&(t.hostname=e(t.host).host),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=l.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.transportOptions=t.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate&&(t.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=void 0===t.rejectUnauthorized||t.rejectUnauthorized,this.forceNode=!!t.forceNode,this.isReactNative="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),("undefined"==typeof self||this.isReactNative)&&(t.extraHeaders&&Object.keys(t.extraHeaders).length>0&&(this.extraHeaders=t.extraHeaders),t.localAddress&&(this.localAddress=t.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,void this.open()):new r(n,t)}function o(n){var i={};for(var t in n)n.hasOwnProperty(t)&&(i[t]=n[t]);return i}var s=i(15),h=i(8),u=i(3)("engine.io-client:socket"),c=i(35),f=i(21),e=i(2),l=i(29);n.exports=r;r.priorWebsocketSuccess=!1;h(r.prototype);r.protocol=f.protocol;r.Socket=r;r.Transport=i(20);r.transports=i(15);r.parser=i(21);r.prototype.createTransport=function(n){var i,t;return u('creating transport "%s"',n),i=o(this.query),i.EIO=f.protocol,i.transport=n,t=this.transportOptions[n]||{},this.id&&(i.sid=this.id),new s[n]({query:i,socket:this,agent:t.agent||this.agent,hostname:t.hostname||this.hostname,port:t.port||this.port,secure:t.secure||this.secure,path:t.path||this.path,forceJSONP:t.forceJSONP||this.forceJSONP,jsonp:t.jsonp||this.jsonp,forceBase64:t.forceBase64||this.forceBase64,enablesXDR:t.enablesXDR||this.enablesXDR,timestampRequests:t.timestampRequests||this.timestampRequests,timestampParam:t.timestampParam||this.timestampParam,policyPort:t.policyPort||this.policyPort,pfx:t.pfx||this.pfx,key:t.key||this.key,passphrase:t.passphrase||this.passphrase,cert:t.cert||this.cert,ca:t.ca||this.ca,ciphers:t.ciphers||this.ciphers,rejectUnauthorized:t.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:t.perMessageDeflate||this.perMessageDeflate,extraHeaders:t.extraHeaders||this.extraHeaders,forceNode:t.forceNode||this.forceNode,localAddress:t.localAddress||this.localAddress,requestTimeout:t.requestTimeout||this.requestTimeout,protocols:t.protocols||void 0,isReactNative:this.isReactNative})};r.prototype.open=function(){var n,t;if(this.rememberUpgrade&&r.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)n="websocket";else{if(0===this.transports.length)return t=this,void setTimeout(function(){t.emit("error","No transports available")},0);n=this.transports[0]}this.readyState="opening";try{n=this.createTransport(n)}catch(i){return this.transports.shift(),void this.open()}n.open();this.setTransport(n)};r.prototype.setTransport=function(n){u("setting transport %s",n.name);var t=this;this.transport&&(u("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners());this.transport=n;n.on("drain",function(){t.onDrain()}).on("packet",function(n){t.onPacket(n)}).on("error",function(n){t.onError(n)}).on("close",function(){t.onClose("transport close")})};r.prototype.probe=function(n){function o(){if(i.onlyBinaryUpgrades){var e=!this.supportsBinary&&i.transport.supportsBinary;f=f||e}f||(u('probe transport "%s" opened',n),t.send([{type:"ping",data:"probe"}]),t.once("packet",function(e){if(!f)if("pong"===e.type&&"probe"===e.data){if(u('probe transport "%s" pong',n),i.upgrading=!0,i.emit("upgrading",t),!t)return;r.priorWebsocketSuccess="websocket"===t.name;u('pausing current transport "%s"',i.transport.name);i.transport.pause(function(){f||"closed"!==i.readyState&&(u("changing transport and sending upgrade packet"),a(),i.setTransport(t),t.send([{type:"upgrade"}]),i.emit("upgrade",t),t=null,i.upgrading=!1,i.flush())})}else{u('probe transport "%s" failed',n);var o=new Error("probe error");o.transport=t.name;i.emit("upgradeError",o)}}))}function s(){f||(f=!0,a(),t.close(),t=null)}function e(r){var f=new Error("probe error: "+r);f.transport=t.name;s();u('probe transport "%s" failed because of error: %s',n,r);i.emit("upgradeError",f)}function h(){e("transport closed")}function c(){e("socket closed")}function l(n){t&&n.name!==t.name&&(u('"%s" works - aborting "%s"',n.name,t.name),s())}function a(){t.removeListener("open",o);t.removeListener("error",e);t.removeListener("close",h);i.removeListener("close",c);i.removeListener("upgrading",l)}u('probing transport "%s"',n);var t=this.createTransport(n,{probe:1}),f=!1,i=this;r.priorWebsocketSuccess=!1;t.once("open",o);t.once("error",e);t.once("close",h);this.once("close",c);this.once("upgrading",l);t.open()};r.prototype.onOpen=function(){if(u("socket open"),this.readyState="open",r.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){u("starting upgrade probes");for(var n=0,t=this.upgrades.length;n<t;n++)this.probe(this.upgrades[n])}};r.prototype.onPacket=function(n){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(u('socket receive: type "%s", data "%s"',n.type,n.data),this.emit("packet",n),this.emit("heartbeat"),n.type){case"open":this.onHandshake(JSON.parse(n.data));break;case"pong":this.setPing();this.emit("pong");break;case"error":var t=new Error("server error");t.code=n.data;this.onError(t);break;case"message":this.emit("data",n.data);this.emit("message",n.data)}else u('packet received with socket readyState "%s"',this.readyState)};r.prototype.onHandshake=function(n){this.emit("handshake",n);this.id=n.sid;this.transport.query.sid=n.sid;this.upgrades=this.filterUpgrades(n.upgrades);this.pingInterval=n.pingInterval;this.pingTimeout=n.pingTimeout;this.onOpen();"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))};r.prototype.onHeartbeat=function(n){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!==t.readyState&&t.onClose("ping timeout")},n||t.pingInterval+t.pingTimeout)};r.prototype.setPing=function(){var n=this;clearTimeout(n.pingIntervalTimer);n.pingIntervalTimer=setTimeout(function(){u("writing ping packet - expecting pong within %sms",n.pingTimeout);n.ping();n.onHeartbeat(n.pingTimeout)},n.pingInterval)};r.prototype.ping=function(){var n=this;this.sendPacket("ping",function(){n.emit("ping")})};r.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen);this.prevBufferLen=0;0===this.writeBuffer.length?this.emit("drain"):this.flush()};r.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(u("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))};r.prototype.write=r.prototype.send=function(n,t,i){return this.sendPacket("message",n,t,i),this};r.prototype.sendPacket=function(n,t,i,r){if("function"==typeof t&&(r=t,t=void 0),"function"==typeof i&&(r=i,i=null),"closing"!==this.readyState&&"closed"!==this.readyState){i=i||{};i.compress=!1!==i.compress;var u={type:n,data:t,options:i};this.emit("packetCreate",u);this.writeBuffer.push(u);r&&this.once("flush",r);this.flush()}};r.prototype.close=function(){function i(){n.onClose("forced close");u("socket closing - telling transport to close");n.transport.close()}function t(){n.removeListener("upgrade",t);n.removeListener("upgradeError",t);i()}function r(){n.once("upgrade",t);n.once("upgradeError",t)}if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var n=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?r():i()}):this.upgrading?r():i()}return this};r.prototype.onError=function(n){u("socket error %j",n);r.priorWebsocketSuccess=!1;this.emit("error",n);this.onClose("transport error",n)};r.prototype.onClose=function(n,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){u('socket close with reason: "%s"',n);var i=this;clearTimeout(this.pingIntervalTimer);clearTimeout(this.pingTimeoutTimer);this.transport.removeAllListeners("close");this.transport.close();this.transport.removeAllListeners();this.readyState="closed";this.id=null;this.emit("close",n,t);i.writeBuffer=[];i.prevBufferLen=0}};r.prototype.filterUpgrades=function(n){for(var i=[],t=0,r=n.length;t<r;t++)~c(this.transports,n[t])&&i.push(n[t]);return i}},function(n,t,i){function r(n){var r,o=!1,s=!1,h=!1!==n.jsonp,i,t;if("undefined"!=typeof location&&(i="https:"===location.protocol,t=location.port,t||(t=i?443:80),o=n.hostname!==location.hostname||t!==n.port,s=n.secure!==i),n.xdomain=o,n.xscheme=s,r=new u(n),"open"in r&&!n.forceJSONP)return new f(n);if(!h)throw new Error("JSONP disabled");return new e(n)}var u=i(16),f=i(18),e=i(32),o=i(33);t.polling=r;t.websocket=o},function(n,t,i){var r=i(17);n.exports=function(n){var t=n.xdomain,i=n.xscheme,u=n.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||r))return new XMLHttpRequest}catch(f){}try{if("undefined"!=typeof XDomainRequest&&!i&&u)return new XDomainRequest}catch(f){}if(!t)try{return new self[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch(f){}}},function(n){try{n.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){n.exports=!1}},function(n,t,i){function e(){}function u(n){if(s.call(this,n),this.requestTimeout=n.requestTimeout,this.extraHeaders=n.extraHeaders,"undefined"!=typeof location){var i="https:"===location.protocol,t=location.port;t||(t=i?443:80);this.xd="undefined"!=typeof location&&n.hostname!==location.hostname||t!==n.port;this.xs=n.secure!==i}}function r(n){this.method=n.method||"GET";this.uri=n.uri;this.xd=!!n.xd;this.xs=!!n.xs;this.async=!1!==n.async;this.data=void 0!==n.data?n.data:null;this.agent=n.agent;this.isBinary=n.isBinary;this.supportsBinary=n.supportsBinary;this.enablesXDR=n.enablesXDR;this.requestTimeout=n.requestTimeout;this.pfx=n.pfx;this.key=n.key;this.passphrase=n.passphrase;this.cert=n.cert;this.ca=n.ca;this.ciphers=n.ciphers;this.rejectUnauthorized=n.rejectUnauthorized;this.extraHeaders=n.extraHeaders;this.create()}function o(){for(var n in r.requests)r.requests.hasOwnProperty(n)&&r.requests[n].abort()}var c=i(16),s=i(19),l=i(8),a=i(30),f=i(3)("engine.io-client:polling-xhr"),h;(n.exports=u,n.exports.Request=r,a(u,s),u.prototype.supportsBinary=!0,u.prototype.request=function(n){return n=n||{},n.uri=this.uri(),n.xd=this.xd,n.xs=this.xs,n.agent=this.agent||!1,n.supportsBinary=this.supportsBinary,n.enablesXDR=this.enablesXDR,n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized,n.requestTimeout=this.requestTimeout,n.extraHeaders=this.extraHeaders,new r(n)},u.prototype.doWrite=function(n,t){var r="string"!=typeof n&&void 0!==n,i=this.request({method:"POST",data:n,isBinary:r}),u=this;i.on("success",t);i.on("error",function(n){u.onError("xhr post error",n)});this.sendXhr=i},u.prototype.doPoll=function(){f("xhr poll");var n=this.request(),t=this;n.on("data",function(n){t.onData(n)});n.on("error",function(n){t.onError("xhr poll error",n)});this.pollXhr=n},l(r.prototype),r.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR},n,i,u;t.pfx=this.pfx;t.key=this.key;t.passphrase=this.passphrase;t.cert=this.cert;t.ca=this.ca;t.ciphers=this.ciphers;t.rejectUnauthorized=this.rejectUnauthorized;n=this.xhr=new c(t);i=this;try{f("xhr open %s: %s",this.method,this.uri);n.open(this.method,this.uri,this.async);try{if(this.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(u in this.extraHeaders)this.extraHeaders.hasOwnProperty(u)&&n.setRequestHeader(u,this.extraHeaders[u])}}catch(e){}if("POST"===this.method)try{this.isBinary?n.setRequestHeader("Content-type","application/octet-stream"):n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{n.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in n&&(n.withCredentials=!0);this.requestTimeout&&(n.timeout=this.requestTimeout);this.hasXDR()?(n.onload=function(){i.onLoad()},n.onerror=function(){i.onError(n.responseText)}):n.onreadystatechange=function(){if(2===n.readyState)try{var t=n.getResponseHeader("Content-Type");i.supportsBinary&&"application/octet-stream"===t&&(n.responseType="arraybuffer")}catch(r){}4===n.readyState&&(200===n.status||1223===n.status?i.onLoad():setTimeout(function(){i.onError(n.status)},0))};f("xhr data %s",this.data);n.send(this.data)}catch(e){return void setTimeout(function(){i.onError(e)},0)}"undefined"!=typeof document&&(this.index=r.requestsCount++,r.requests[this.index]=this)},r.prototype.onSuccess=function(){this.emit("success");this.cleanup()},r.prototype.onData=function(n){this.emit("data",n);this.onSuccess()},r.prototype.onError=function(n){this.emit("error",n);this.cleanup(!0)},r.prototype.cleanup=function(n){if("undefined"!=typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=e:this.xhr.onreadystatechange=e,n)try{this.xhr.abort()}catch(t){}"undefined"!=typeof document&&delete r.requests[this.index];this.xhr=null}},r.prototype.onLoad=function(){var n,t;try{try{t=this.xhr.getResponseHeader("Content-Type")}catch(i){}n="application/octet-stream"===t?this.xhr.response||this.xhr.responseText:this.xhr.responseText}catch(i){this.onError(i)}null!=n&&this.onData(n)},r.prototype.hasXDR=function(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR},r.prototype.abort=function(){this.cleanup()},r.requestsCount=0,r.requests={},"undefined"!=typeof document)&&("function"==typeof attachEvent?attachEvent("onunload",o):"function"==typeof addEventListener&&(h="onpagehide"in self?"pagehide":"unload",addEventListener(h,o,!1)))},function(n,t,i){function u(n){var t=n&&n.forceBase64;o&&!t||(this.supportsBinary=!1);f.call(this,n)}var f=i(20),s=i(29),e=i(21),h=i(30),c=i(31),r=i(3)("engine.io-client:polling"),o;n.exports=u;o=function(){var n=i(16),t=new n({xdomain:!1});return null!=t.responseType}();h(u,f);u.prototype.name="polling";u.prototype.doOpen=function(){this.poll()};u.prototype.pause=function(n){function i(){r("paused");u.readyState="paused";n()}var u=this,t;(this.readyState="pausing",this.polling||!this.writable)?(t=0,this.polling&&(r("we are currently polling - waiting to pause"),t++,this.once("pollComplete",function(){r("pre-pause polling complete");--t||i()})),this.writable||(r("we are currently writing - waiting to pause"),t++,this.once("drain",function(){r("pre-pause writing complete");--t||i()}))):i()};u.prototype.poll=function(){r("polling");this.polling=!0;this.doPoll();this.emit("poll")};u.prototype.onData=function(n){var t=this,i;r("polling got data %s",n);i=function(n){return"opening"===t.readyState&&t.onOpen(),"close"===n.type?(t.onClose(),!1):void t.onPacket(n)};e.decodePayload(n,this.socket.binaryType,i);"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():r('ignoring poll - transport state "%s"',this.readyState))};u.prototype.doClose=function(){function n(){r("writing close packet");t.write([{type:"close"}])}var t=this;"open"===this.readyState?(r("transport open - closing"),n()):(r("transport not open - deferring close"),this.once("open",n))};u.prototype.write=function(n){var t=this,i;this.writable=!1;i=function(){t.writable=!0;t.emit("drain")};e.encodePayload(n,this.supportsBinary,function(n){t.doWrite(n,i)})};u.prototype.uri=function(){var n=this.query||{},t=this.secure?"https":"http",i="",r;return!1!==this.timestampRequests&&(n[this.timestampParam]=c()),this.supportsBinary||n.sid||(n.b64=1),n=s.encode(n),this.port&&("https"===t&&443!==Number(this.port)||"http"===t&&80!==Number(this.port))&&(i=":"+this.port),n.length&&(n="?"+n),r=this.hostname.indexOf(":")!==-1,t+"://"+(r?"["+this.hostname+"]":this.hostname)+i+this.path+n}},function(n,t,i){function r(n){this.path=n.path;this.hostname=n.hostname;this.port=n.port;this.secure=n.secure;this.query=n.query;this.timestampParam=n.timestampParam;this.timestampRequests=n.timestampRequests;this.readyState="";this.agent=n.agent||!1;this.socket=n.socket;this.enablesXDR=n.enablesXDR;this.pfx=n.pfx;this.key=n.key;this.passphrase=n.passphrase;this.cert=n.cert;this.ca=n.ca;this.ciphers=n.ciphers;this.rejectUnauthorized=n.rejectUnauthorized;this.forceNode=n.forceNode;this.isReactNative=n.isReactNative;this.extraHeaders=n.extraHeaders;this.localAddress=n.localAddress}var u=i(21),f=i(8);n.exports=r;f(r.prototype);r.prototype.onError=function(n,t){var i=new Error(n);return i.type="TransportError",i.description=t,this.emit("error",i),this};r.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this};r.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this};r.prototype.send=function(n){if("open"!==this.readyState)throw new Error("Transport not open");this.write(n)};r.prototype.onOpen=function(){this.readyState="open";this.writable=!0;this.emit("open")};r.prototype.onData=function(n){var t=u.decodePacket(n,this.socket.binaryType);this.onPacket(t)};r.prototype.onPacket=function(n){this.emit("packet",n)};r.prototype.onClose=function(){this.readyState="closed";this.emit("close")}},function(n,t,i){function a(n,i){var r="b"+t.packets[n.type]+n.data.data;return i(r)}function v(n,i,r){var u;if(!i)return t.encodeBase64Packet(n,r);var e=n.data,s=new Uint8Array(e),f=new Uint8Array(1+e.byteLength);for(f[0]=o[n.type],u=0;u<s.length;u++)f[u+1]=s[u];return r(f.buffer)}function y(n,i,r){if(!i)return t.encodeBase64Packet(n,r);var u=new FileReader;return u.onload=function(){t.encodePacket({type:n.type,data:u.result},i,!0,r)},u.readAsArrayBuffer(n.data)}function p(n,i,u){var f,e;return i?l?y(n,i,u):(f=new Uint8Array(1),f[0]=o[n.type],e=new r([f.buffer,n.data]),u(e)):t.encodeBase64Packet(n,u)}function w(n){try{n=c.decode(n,{strict:!1})}catch(t){return!1}return n}function s(n,t,i){for(var u=new Array(n.length),f=d(n.length,i),e=function(n,i,r){t(i,function(t,i){u[n]=i;r(t,u)})},r=0;r<n.length;r++)e(r,n[r],f)}var h,b=i(22),k=i(23),e=i(24),d=i(25),c=i(26);"undefined"!=typeof ArrayBuffer&&(h=i(27));var g="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),nt="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),l=g||nt;t.protocol=3;var o=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},f=b(o),u={type:"error",data:"parser error"},r=i(28);t.encodePacket=function(n,t,i,u){var f,e;return("function"==typeof t&&(u=t,t=!1),"function"==typeof i&&(u=i,i=null),f=void 0===n.data?void 0:n.data.buffer||n.data,"undefined"!=typeof ArrayBuffer&&f instanceof ArrayBuffer)?v(n,t,u):"undefined"!=typeof r&&f instanceof r?p(n,t,u):f&&f.base64?a(n,u):(e=o[n.type],void 0!==n.data&&(e+=i?c.encode(String(n.data),{strict:!1}):String(n.data)),u(""+e))};t.encodeBase64Packet=function(n,i){var e="b"+t.packets[n.type],u,o;if("undefined"!=typeof r&&n.data instanceof r)return u=new FileReader,u.onload=function(){var n=u.result.split(",")[1];i(e+n)},u.readAsDataURL(n.data);try{o=String.fromCharCode.apply(null,new Uint8Array(n.data))}catch(c){for(var s=new Uint8Array(n.data),h=new Array(s.length),f=0;f<s.length;f++)h[f]=s[f];o=String.fromCharCode.apply(null,h)}return e+=btoa(o),i(e)};t.decodePacket=function(n,i,o){var s;if(void 0===n)return u;if("string"==typeof n)return"b"===n.charAt(0)?t.decodeBase64Packet(n.substr(1),i):o&&(n=w(n),n===!1)?u:(s=n.charAt(0),Number(s)==s&&f[s]?n.length>1?{type:f[s],data:n.substring(1)}:{type:f[s]}:u);var c=new Uint8Array(n),s=c[0],h=e(n,1);return r&&"blob"===i&&(h=new r([h])),{type:f[s],data:h}};t.decodeBase64Packet=function(n,t){var u=f[n.charAt(0)],i;return h?(i=h.decode(n.substr(1)),"blob"===t&&r&&(i=new r([i])),{type:u,data:i}):{type:u,data:{base64:!0,data:n.substr(1)}}};t.encodePayload=function(n,i,u){function e(n){return n.length+":"+n}function o(n,r){t.encodePacket(n,!!f&&i,!1,function(n){r(null,e(n))})}"function"==typeof i&&(u=i,i=null);var f=k(n);return i&&f?r&&!l?t.encodePayloadAsBlob(n,u):t.encodePayloadAsArrayBuffer(n,u):n.length?void s(n,o,function(n,t){return u(t.join(""))}):u("0:")};t.decodePayload=function(n,i,r){var o,c,a;if("string"!=typeof n)return t.decodePayloadAsBinary(n,i,r);if("function"==typeof i&&(r=i,i=null),""===n)return r(u,0,1);for(var s,h,f="",e=0,l=n.length;e<l;e++)if(c=n.charAt(e),":"===c){if(""===f||f!=(s=Number(f))||(h=n.substr(e+1,s),f!=h.length))return r(u,0,1);if(h.length){if(o=t.decodePacket(h,i,!1),u.type===o.type&&u.data===o.data)return r(u,0,1);if(a=r(o,e+s,l),!1===a)return}e+=s;f=""}else f+=c;if(""!==f)return r(u,0,1)};t.encodePayloadAsArrayBuffer=function(n,i){function r(n,i){t.encodePacket(n,!0,!0,function(n){return i(null,n)})}return n.length?void s(n,r,function(n,t){var f=t.reduce(function(n,t){var i;return i="string"==typeof t?t.length:t.byteLength,n+i.toString().length+i+2},0),r=new Uint8Array(f),u=0;return t.forEach(function(n){var o="string"==typeof n,f=n,e,i,t;if(o){for(i=new Uint8Array(n.length),t=0;t<n.length;t++)i[t]=n.charCodeAt(t);f=i.buffer}for(r[u++]=o?0:1,e=f.byteLength.toString(),t=0;t<e.length;t++)r[u++]=parseInt(e[t]);for(r[u++]=255,i=new Uint8Array(f),t=0;t<i.length;t++)r[u++]=i[t]}),i(r.buffer)}):i(new ArrayBuffer(0))};t.encodePayloadAsBlob=function(n,i){function u(n,i){t.encodePacket(n,!0,!0,function(n){var f=new Uint8Array(1),e,t,s;if(f[0]=1,"string"==typeof n){for(e=new Uint8Array(n.length),t=0;t<n.length;t++)e[t]=n.charCodeAt(t);n=e.buffer;f[0]=0}for(var h=n instanceof ArrayBuffer?n.byteLength:n.size,u=h.toString(),o=new Uint8Array(u.length+1),t=0;t<u.length;t++)o[t]=parseInt(u[t]);(o[u.length]=255,r)&&(s=new r([f.buffer,o.buffer,n]),i(null,s))})}s(n,u,function(n,t){return i(new r(t))})};t.decodePayloadAsBinary=function(n,i,r){var f,c,h,a,s,v;for("function"==typeof i&&(r=i,i=null),f=n,c=[];f.byteLength>0;){for(var l=new Uint8Array(f),y=0===l[0],o="",s=1;255!==l[s];s++){if(o.length>310)return r(u,0,1);o+=l[s]}if(f=e(f,2+o.length),o=parseInt(o),h=e(f,0,o),y)try{h=String.fromCharCode.apply(null,new Uint8Array(h))}catch(p){for(a=new Uint8Array(h),h="",s=0;s<a.length;s++)h+=String.fromCharCode(a[s])}c.push(h);f=e(f,o)}v=c.length;c.forEach(function(n,u){r(t.decodePacket(n,i,!0),u,v)})}},function(n){n.exports=Object.keys||function(n){var t=[],r=Object.prototype.hasOwnProperty;for(var i in n)r.call(n,i)&&t.push(i);return t}},function(n,t,i){function r(n){var t,u,i;if(!n||"object"!=typeof n)return!1;if(f(n)){for(t=0,u=n.length;t<u;t++)if(r(n[t]))return!0;return!1}if("function"==typeof Buffer&&Buffer.isBuffer&&Buffer.isBuffer(n)||"function"==typeof ArrayBuffer&&n instanceof ArrayBuffer||e&&n instanceof Blob||o&&n instanceof File)return!0;if(n.toJSON&&"function"==typeof n.toJSON&&1===arguments.length)return r(n.toJSON(),!0);for(i in n)if(Object.prototype.hasOwnProperty.call(n,i)&&r(n[i]))return!0;return!1}var f=i(10),u=Object.prototype.toString,e="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===u.call(Blob),o="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===u.call(File);n.exports=r},function(n){n.exports=function(n,t,i){var r=n.byteLength;if(t=t||0,i=i||r,n.slice)return n.slice(t,i);if(t<0&&(t+=r),i<0&&(i+=r),i>r&&(i=r),t>=r||t>=i||0===r)return new ArrayBuffer(0);for(var o=new Uint8Array(n),f=new Uint8Array(i-t),u=t,e=0;u<i;u++,e++)f[e]=o[u];return f.buffer}},function(n){function t(n,t,r){function u(n,i){if(u.count<=0)throw new Error("after called too many times");--u.count;n?(f=!0,t(n),t=r):0!==u.count||f||t(null,i)}var f=!1;return r=r||i,u.count=n,0===n?t():u}function i(){}n.exports=t},function(n){function o(n){for(var t,u,r=[],i=0,f=n.length;i<f;)t=n.charCodeAt(i++),t>=55296&&t<=56319&&i<f?(u=n.charCodeAt(i++),56320==(64512&u)?r.push(((1023&t)<<10)+(1023&u)+65536):(r.push(t),i--)):r.push(t);return r}function h(n){for(var t,f=n.length,u=-1,r="";++u<f;)t=n[u],t>65535&&(t-=65536,r+=i(t>>>10&1023|55296),t=56320|1023&t),r+=i(t);return r}function s(n,t){if(n>=55296&&n<=57343){if(t)throw Error("Lone surrogate U+"+n.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function e(n,t){return i(n>>t&63|128)}function c(n,t){if(0==(4294967168&n))return i(n);var r="";return 0==(4294965248&n)?r=i(n>>6&31|192):0==(4294901760&n)?(s(n,t)||(n=65533),r=i(n>>12&15|224),r+=e(n,6)):0==(4292870144&n)&&(r=i(n>>18&7|240),r+=e(n,12),r+=e(n,6)),r+i(63&n|128)}function l(n,t){t=t||{};for(var i,e=!1!==t.strict,r=o(n),s=r.length,u=-1,f="";++u<s;)i=r[u],f+=c(i,e);return f}function r(){if(t>=f)throw Error("Invalid byte index");var n=255&u[t];if(t++,128==(192&n))return 63&n;throw Error("Invalid continuation byte");}function a(n){var e,o,h,c,i;if(t>f)throw Error("Invalid byte index");if(t==f)return!1;if(e=255&u[t],t++,0==(128&e))return e;if(192==(224&e)){if(o=r(),i=(31&e)<<6|o,i>=128)return i;throw Error("Invalid continuation byte");}if(224==(240&e)){if(o=r(),h=r(),i=(15&e)<<12|o<<6|h,i>=2048)return s(i,n)?i:65533;throw Error("Invalid continuation byte");}if(240==(248&e)&&(o=r(),h=r(),c=r(),i=(7&e)<<18|o<<12|h<<6|c,i>=65536&&i<=1114111))return i;throw Error("Invalid UTF-8 detected");}function v(n,i){var e,s,r;for(i=i||{},e=!1!==i.strict,u=o(n),f=u.length,t=0,r=[];(s=a(e))!==!1;)r.push(s);return h(r)}
/*! https://mths.be/utf8js v2.1.2 by @mathias */
var u,f,t,i=String.fromCharCode;n.exports={version:"2.1.2",encode:l,decode:v}},function(n,t){!function(){"use strict";for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=new Uint8Array(256),r=0;r<n.length;r++)i[n.charCodeAt(r)]=r;t.encode=function(t){for(var u=new Uint8Array(t),f=u.length,i="",r=0;r<f;r+=3)i+=n[u[r]>>2],i+=n[(3&u[r])<<4|u[r+1]>>4],i+=n[(15&u[r+1])<<2|u[r+2]>>6],i+=n[63&u[r+2]];return f%3==2?i=i.substring(0,i.length-1)+"=":f%3==1&&(i=i.substring(0,i.length-2)+"=="),i};t.decode=function(n){var t,h,u,f,c,e=.75*n.length,l=n.length,o=0,s,r;for("="===n[n.length-1]&&(e--,"="===n[n.length-2]&&e--),s=new ArrayBuffer(e),r=new Uint8Array(s),t=0;t<l;t+=4)h=i[n.charCodeAt(t)],u=i[n.charCodeAt(t+1)],f=i[n.charCodeAt(t+2)],c=i[n.charCodeAt(t+3)],r[o++]=h<<2|u>>4,r[o++]=(15&u)<<4|f>>2,r[o++]=(3&f)<<6|63&c;return s}}()},function(n){function i(n){return n.map(function(n){var t,i;return n.buffer instanceof ArrayBuffer?(t=n.buffer,n.byteLength!==t.byteLength&&(i=new Uint8Array(n.byteLength),i.set(new Uint8Array(t,n.byteOffset,n.byteLength)),t=i.buffer),t):n})}function r(n,r){r=r||{};var u=new t;return i(n).forEach(function(n){u.append(n)}),r.type?u.getBlob(r.type):u.getBlob()}function u(n,t){return new Blob(i(n),t||{})}var t="undefined"!=typeof t?t:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder&&MozBlobBuilder,f=function(){try{var n=new Blob(["hi"]);return 2===n.size}catch(t){return!1}}(),e=f&&function(){try{var n=new Blob([new Uint8Array([1,2])]);return 2===n.size}catch(t){return!1}}(),o=t&&t.prototype.append&&t.prototype.getBlob;"undefined"!=typeof Blob&&(r.prototype=Blob.prototype,u.prototype=Blob.prototype);n.exports=function(){return f?e?Blob:u:o?r:void 0}()},function(n,t){t.encode=function(n){var t="";for(var i in n)n.hasOwnProperty(i)&&(t.length&&(t+="&"),t+=encodeURIComponent(i)+"="+encodeURIComponent(n[i]));return t};t.decode=function(n){for(var i,r={},u=n.split("&"),t=0,f=u.length;t<f;t++)i=u[t].split("="),r[decodeURIComponent(i[0])]=decodeURIComponent(i[1]);return r}},function(n){n.exports=function(n,t){var i=function(){};i.prototype=t.prototype;n.prototype=new i;n.prototype.constructor=n}},function(n){"use strict";function r(n){var t="";do t=e[n%i]+t,n=Math.floor(n/i);while(n>0);return t}function h(n){var r=0;for(t=0;t<n.length;t++)r=r*i+o[n.charAt(t)];return r}function u(){var n=r(+new Date);return n!==f?(s=0,f=n):n+"."+r(s++)}for(var f,e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),i=64,o={},s=0,t=0;t<i;t++)o[e[t]]=t;u.encode=r;u.decode=h;n.exports=u},function(n,t,i){(function(t){function s(){}function h(){return"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof t?t:{}}function r(n){var i,t;(f.call(this,n),this.query=this.query||{},u)||(i=h(),u=i.___eio=i.___eio||[]);this.index=u.length;t=this;u.push(function(n){t.onData(n)});this.query.j=this.index;"function"==typeof addEventListener&&addEventListener("beforeunload",function(){t.script&&(t.script.onerror=s)},!1)}var f=i(19),c=i(30),u,e,o;n.exports=r;e=/\n/g;o=/\\n/g;c(r,f);r.prototype.supportsBinary=!1;r.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null);this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null);f.prototype.doClose.call(this)};r.prototype.doPoll=function(){var r=this,n=document.createElement("script"),t,i;this.script&&(this.script.parentNode.removeChild(this.script),this.script=null);n.async=!0;n.src=this.uri();n.onerror=function(n){r.onError("jsonp poll error",n)};t=document.getElementsByTagName("script")[0];t?t.parentNode.insertBefore(n,t):(document.head||document.body).appendChild(n);this.script=n;i="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);i&&setTimeout(function(){var n=document.createElement("iframe");document.body.appendChild(n);document.body.removeChild(n)},100)};r.prototype.doWrite=function(n,t){function s(){h();t()}function h(){if(i.iframe)try{i.form.removeChild(i.iframe)}catch(n){i.onError("jsonp polling iframe removal error",n)}try{var t='<iframe src="javascript:0" name="'+i.iframeId+'">';u=document.createElement(t)}catch(n){u=document.createElement("iframe");u.name=i.iframeId;u.src="javascript:0"}u.id=i.iframeId;i.form.appendChild(u);i.iframe=u}var i=this;if(!this.form){var u,r=document.createElement("form"),f=document.createElement("textarea"),c=this.iframeId="eio_iframe_"+this.index;r.className="socketio";r.style.position="absolute";r.style.top="-1000px";r.style.left="-1000px";r.target=c;r.method="POST";r.setAttribute("accept-charset","utf-8");f.name="d";r.appendChild(f);document.body.appendChild(r);this.form=r;this.area=f}this.form.action=this.uri();h();n=n.replace(o,"\\\n");this.area.value=n.replace(e,"\\n");try{this.form.submit()}catch(l){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===i.iframe.readyState&&s()}:this.iframe.onload=s}}).call(t,function(){return this}())},function(n,t,i){function r(n){var t=n&&n.forceBase64;t&&(this.supportsBinary=!1);this.perMessageDeflate=n.perMessageDeflate;this.usingBrowserWebSocket=f&&!n.forceNode;this.protocols=n.protocols;this.usingBrowserWebSocket||(u=e);o.call(this,n)}var f,e,o=i(20),s=i(21),h=i(29),c=i(30),l=i(31),a=i(3)("engine.io-client:websocket"),u;if("undefined"==typeof self)try{e=i(34)}catch(v){}else f=self.WebSocket||self.MozWebSocket;u=f||e;n.exports=r;c(r,o);r.prototype.name="websocket";r.prototype.supportsBinary=!0;r.prototype.doOpen=function(){if(this.check()){var t=this.uri(),i=this.protocols,n={agent:this.agent,perMessageDeflate:this.perMessageDeflate};n.pfx=this.pfx;n.key=this.key;n.passphrase=this.passphrase;n.cert=this.cert;n.ca=this.ca;n.ciphers=this.ciphers;n.rejectUnauthorized=this.rejectUnauthorized;this.extraHeaders&&(n.headers=this.extraHeaders);this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?i?new u(t,i):new u(t):new u(t,i,n)}catch(r){return this.emit("error",r)}void 0===this.ws.binaryType&&(this.supportsBinary=!1);this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer";this.addEventListeners()}};r.prototype.addEventListeners=function(){var n=this;this.ws.onopen=function(){n.onOpen()};this.ws.onclose=function(){n.onClose()};this.ws.onmessage=function(t){n.onData(t.data)};this.ws.onerror=function(t){n.onError("websocket error",t)}};r.prototype.write=function(n){function u(){t.emit("flush");setTimeout(function(){t.writable=!0;t.emit("drain")},0)}var t=this;this.writable=!1;for(var r=n.length,i=0,f=r;i<f;i++)!function(n){s.encodePacket(n,t.supportsBinary,function(i){var f,e;t.usingBrowserWebSocket||(f={},(n.options&&(f.compress=n.options.compress),t.perMessageDeflate)&&(e="string"==typeof i?Buffer.byteLength(i):i.length,e<t.perMessageDeflate.threshold&&(f.compress=!1)));try{t.usingBrowserWebSocket?t.ws.send(i):t.ws.send(i,f)}catch(o){a("websocket closed before onclose event")}--r||u()})}(n[i])};r.prototype.onClose=function(){o.prototype.onClose.call(this)};r.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()};r.prototype.uri=function(){var n=this.query||{},t=this.secure?"wss":"ws",i="",r;return this.port&&("wss"===t&&443!==Number(this.port)||"ws"===t&&80!==Number(this.port))&&(i=":"+this.port),this.timestampRequests&&(n[this.timestampParam]=l()),this.supportsBinary||(n.b64=1),n=h.encode(n),n.length&&(n="?"+n),r=this.hostname.indexOf(":")!==-1,t+"://"+(r?"["+this.hostname+"]":this.hostname)+i+this.path+n};r.prototype.check=function(){return!(!u||"__initialize"in u&&this.name===r.prototype.name)}},function(){},function(n){var t=[].indexOf;n.exports=function(n,i){if(t)return n.indexOf(i);for(var r=0;r<n.length;++r)if(n[r]===i)return r;return-1}},function(n,t,i){"use strict";function r(n,t,i){this.io=n;this.nsp=t;this.json=this;this.ids=0;this.acks={};this.receiveBuffer=[];this.sendBuffer=[];this.connected=!1;this.disconnected=!0;this.flags={};i&&i.query&&(this.query=i.query);this.io.autoConnect&&this.open()}var v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},u=i(7),c=i(8),o=i(37),s=i(38),h=i(39),f=i(3)("socket.io-client:socket"),y=i(29),l=i(23),a,e;n.exports=t=r;a={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1};e=c.prototype.emit;c(r.prototype);r.prototype.subEvents=function(){if(!this.subs){var n=this.io;this.subs=[s(n,"open",h(this,"onopen")),s(n,"packet",h(this,"onpacket")),s(n,"close",h(this,"onclose"))]}};r.prototype.open=r.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting"),this)};r.prototype.send=function(){var n=o(arguments);return n.unshift("message"),this.emit.apply(this,n),this};r.prototype.emit=function(n){if(a.hasOwnProperty(n))return e.apply(this,arguments),this;var t=o(arguments),i={type:(void 0!==this.flags.binary?this.flags.binary:l(t))?u.BINARY_EVENT:u.EVENT,data:t};return i.options={},i.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(f("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),i.id=this.ids++),this.connected?this.packet(i):this.sendBuffer.push(i),this.flags={},this};r.prototype.packet=function(n){n.nsp=this.nsp;this.io.packet(n)};r.prototype.onopen=function(){if(f("transport is open - connecting"),"/"!==this.nsp)if(this.query){var n="object"===v(this.query)?y.encode(this.query):this.query;f("sending connect packet with query %s",n);this.packet({type:u.CONNECT,query:n})}else this.packet({type:u.CONNECT})};r.prototype.onclose=function(n){f("close (%s)",n);this.connected=!1;this.disconnected=!0;delete this.id;this.emit("disconnect",n)};r.prototype.onpacket=function(n){var t=n.nsp===this.nsp,i=n.type===u.ERROR&&"/"===n.nsp;if(t||i)switch(n.type){case u.CONNECT:this.onconnect();break;case u.EVENT:this.onevent(n);break;case u.BINARY_EVENT:this.onevent(n);break;case u.ACK:this.onack(n);break;case u.BINARY_ACK:this.onack(n);break;case u.DISCONNECT:this.ondisconnect();break;case u.ERROR:this.emit("error",n.data)}};r.prototype.onevent=function(n){var t=n.data||[];f("emitting event %j",t);null!=n.id&&(f("attaching ack callback to event"),t.push(this.ack(n.id)));this.connected?e.apply(this,t):this.receiveBuffer.push(t)};r.prototype.ack=function(n){var i=this,t=!1;return function(){if(!t){t=!0;var r=o(arguments);f("sending ack %j",r);i.packet({type:l(r)?u.BINARY_ACK:u.ACK,id:n,data:r})}}};r.prototype.onack=function(n){var t=this.acks[n.id];"function"==typeof t?(f("calling ack %s with %j",n.id,n.data),t.apply(this,n.data),delete this.acks[n.id]):f("bad ack %s",n.id)};r.prototype.onconnect=function(){this.connected=!0;this.disconnected=!1;this.emit("connect");this.emitBuffered()};r.prototype.emitBuffered=function(){for(var n=0;n<this.receiveBuffer.length;n++)e.apply(this,this.receiveBuffer[n]);for(this.receiveBuffer=[],n=0;n<this.sendBuffer.length;n++)this.packet(this.sendBuffer[n]);this.sendBuffer=[]};r.prototype.ondisconnect=function(){f("server disconnect (%s)",this.nsp);this.destroy();this.onclose("io server disconnect")};r.prototype.destroy=function(){if(this.subs){for(var n=0;n<this.subs.length;n++)this.subs[n].destroy();this.subs=null}this.io.destroy(this)};r.prototype.close=r.prototype.disconnect=function(){return this.connected&&(f("performing disconnect (%s)",this.nsp),this.packet({type:u.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this};r.prototype.compress=function(n){return this.flags.compress=n,this};r.prototype.binary=function(n){return this.flags.binary=n,this}},function(n){function t(n,t){var r=[],i;for(t=t||0,i=t||0;i<n.length;i++)r[i-t]=n[i];return r}n.exports=t},function(n){"use strict";function t(n,t,i){return n.on(t,i),{destroy:function(){n.removeListener(t,i)}}}n.exports=t},function(n){var t=[].slice;n.exports=function(n,i){if("string"==typeof i&&(i=n[i]),"function"!=typeof i)throw new Error("bind() requires a function");var r=t.call(arguments,2);return function(){return i.apply(n,r.concat(t.call(arguments)))}}},function(n){function t(n){n=n||{};this.ms=n.min||100;this.max=n.max||1e4;this.factor=n.factor||2;this.jitter=n.jitter>0&&n.jitter<=1?n.jitter:0;this.attempts=0}n.exports=t;t.prototype.duration=function(){var n=this.ms*Math.pow(this.factor,this.attempts++),t,i;return this.jitter&&(t=Math.random(),i=Math.floor(t*this.jitter*n),n=0==(1&Math.floor(10*t))?n-i:n+i),0|Math.min(n,this.max)};t.prototype.reset=function(){this.attempts=0};t.prototype.setMin=function(n){this.ms=n};t.prototype.setMax=function(n){this.max=n};t.prototype.setJitter=function(n){this.jitter=n}}])});
typeof ASC=="undefined"&&(ASC={});ASC.SocketIO=function(n){var t=ASC.Resources.Master,i,r;t.Hub&&t.Hub.Url&&(i=t.Hub,r={path:i.Url,reconnectionAttempts:5,perMessageDeflate:"false"},t.numberId&&i.VoipEnabled&&(r.query={numberId:t.numberId}),this.socket=io(n,r))};ASC.SocketIO.prototype.emit=function(){return this.socket&&this.socket.emit.apply(this.socket,arguments),this};ASC.SocketIO.prototype.on=function(){return this.socket&&(arguments[0]==="connect"&&typeof arguments[1]=="function"&&this.socket.connected?arguments[1]():this.socket.on.apply(this.socket,arguments)),this};ASC.SocketIO.prototype.connect=function(){return this.on.call(this,"connect",arguments[0])};ASC.SocketIO.prototype.reconnect_failed=function(){return this.on.call(this,"reconnect_failed",arguments[0])};ASC.SocketIO.prototype.connected=function(){return this.socket&&this.socket.connected};ASC.SocketIO.disabled=function(){return!ASC.Resources.Master.Hub||!ASC.Resources.Master.Hub.Url};ASC.SocketIO.init=function(){var t=ASC.Resources.Master,n,i;t.Hub&&t.Hub.Url&&(n=ASC.Resources.Master.Hub.Url,i=n.length-1,n.lastIndexOf("/")===n.length-1&&(n=n.substring(0,i)),jq.ajax({type:"OPTIONS",url:n+"/?EIO=3&transport=polling","async":!0}))};ASC.SocketIO.Factory=function(){var n,t,i,r;return{get chat(){return n||(n=new ASC.SocketIO("/chat")),n},get voip(){return t||(t=new ASC.SocketIO("/voip")),t},get counters(){return i||(i=new ASC.SocketIO("/counters")),i},get files(){return r||(r=new ASC.SocketIO("/files")),r}}}();jq(document).ready(function(){ASC.SocketIO.init();ASC.SocketIO.Factory.counters.on("getNewMessagesCount",function(n){ASC.Controls.MailReader&&ASC.Controls.MailReader.setUnreadMailMessagesCount(n.ma)}).on("sendMailNotification",function(n){ASC.Mail.Utility._showSignalRMailNotification(n)}).on("updateFolders",function(n,t){window.serviceManager?(window.serviceManager.updateFolders(),t&&window.serviceManager.getAccounts()):ASC.Controls.MailReader&&ASC.Controls.MailReader.setUnreadMailMessagesCount(n)})});
var ProfileManager=new function(){this.RemoveUserEnterAction=function(){jq("#confirmationDeleteUserPanel .middle-button-container .remove-btn").trigger("click")};this.RemoveUser=function(n,t,i,r){jq("#actionMenu").hide();jq("#confirmationDeleteUserPanel .confirmationAction").html(jq.format(ASC.Resources.Master.ConfirmRemoveUser,"<b>"+Encoder.htmlEncode(t)+"<\/b>"));jq("#confirmationDeleteUserPanel .middle-button-container .remove-btn").off("click").on("click",function(){var t=jq("#confirmationDeleteUserPanel");Teamlab.removeUser({},n,{success:function(){jq.unblockUI();ASC.People.Resources.PeopleResource.SuccessfullyDeleteUserInfoMessage&&toastr.success(ASC.People.Resources.PeopleResource.SuccessfullyDeleteUserInfoMessage);r?r():window.location.reload(!0)},error:function(n,t){toastr.error(t[0])},after:function(){LoadingBanner.hideLoaderBtn(t)},before:function(){LoadingBanner.showLoaderBtn(t)}})});jq("#confirmationDeleteUserPanel .middle-button-container .reassign-btn").off("click").on("click",function(){window.location.replace("Reassigns.aspx?delete=true&user="+encodeURIComponent(i))});StudioBlockUIManager.blockUI("#confirmationDeleteUserPanel",500);PopupKeyUpActionProvider.ClearActions();PopupKeyUpActionProvider.EnterAction="ProfileManager.RemoveUserEnterAction();"}};
function initActionMenu(){var t=jq(".profile-header").offset()==null?0:-jq(".profile-header").offset().top,i=jq(".profile-header").offset()==null?0:-jq(".profile-header").offset().left,n="actionMenu";jq.dropdownToggle({dropdownID:n,switcherSelector:".header-with-menu .menu-small",addTop:t,addLeft:i-11,showFunction:function(n,t){t.is(":hidden")?n.addClass("active"):n.removeClass("active")},hideFunction:function(){jq(".header-with-menu .menu-small.active").removeClass("active")}});jq(jq("#"+n).find(".dropdown-item")).on("click",function(){var i=jq("#"+n),r=i.attr("data-id"),u=i.attr("data-email"),s=i.attr("data-admin")=="true",e=i.attr("data-displayname"),o=i.attr("data-username"),f=i.attr("data-visitor").toLowerCase(),t=jq(this).parent();jq("#actionMenu").hide();jq("#userMenu").removeClass("active");jq(t).hasClass("enable-user")&&onChangeUserStatus(r,1,f);jq(t).hasClass("disable-user")&&onChangeUserStatus(r,2,f);jq(t).hasClass("logout-connections")&&logOutAllConnectionsForUser(r);jq(t).hasClass("psw-change")&&PasswordTool.ShowPwdReminderDialog("1",u);jq(t).hasClass("email-change")&&ASC.EmailOperationManager.showEmailChangeWindow(u,r);jq(t).hasClass("email-activate")&&ASC.EmailOperationManager.sendEmailActivationInstructions(u,r,onActivateEmail.bind(null,u));jq(t).hasClass("edit-photo")&&window.ASC.Controls.LoadPhotoImage.showDialog();jq(t).hasClass("delete-user")&&(jq("#actionMenu").hide(),StudioBlockUIManager.blockUI("#studio_deleteProfileDialog",400),PopupKeyUpActionProvider.ClearActions(),PopupKeyUpActionProvider.EnterAction="SendInstrunctionsToRemoveProfile();");jq(t).hasClass("delete-self")&&ProfileManager.RemoveUser(r,e,o,function(){window.location.replace("/Products/People/")});jq(t).hasClass("subscribe-tips")&&onChangeTipsSubscription(jq(this))})}function onActivateEmail(n,t){var i=t.request.args.email,r=jq("#emailUserProfile .mail"),u=jq("#email-activate");u.attr("data-email",i);r.attr("title",i);r.attr("href",r.attr("href").replace(n,i));r.text(i);jq("#studio_userProfileCardInfo").attr("data-email",i)}function onChangeUserStatus(n,t,i){var r,u;if(t==1&&tenantQuota.availableUsersCount==0&&i=="false"){jq("#tariffLimitExceedUsersPanel").length?TariffLimitExceed.showLimitExceedUsers():toastr.error(ASC.Resources.Master.ResourceJS.UserSelectorErrorLimitUsers);return}r=[];r.push(n);u={userIds:r};Teamlab.updateUserStatus({},t,u,{success:function(){window.location.reload(!0)},before:LoadingBanner.displayLoading,after:LoadingBanner.hideLoading,error:function(n,t){toastr.error(t)}})}function onChangeTipsSubscription(n){Teamlab.updateTipsSubscription({success:function(t,i){var r=i?ASC.Resources.Master.ResourceJS.TipsAndTricksUnsubscribeBtn:ASC.Resources.Master.ResourceJS.TipsAndTricksSubscribeBtn;n.attr("title",r).html(r);toastr.success(ASC.Resources.Master.ResourceJS.ChangesSuccessfullyAppliedMsg)},before:LoadingBanner.displayLoading,after:LoadingBanner.hideLoading,error:function(n,t){toastr.error(t)}})}function initBorderPhoto(){var t=jq("#userProfilePhoto"),n=t.children("img"),i=n.width()<t.width()&&n.height()<200?(t.width()-n.width())/2:0;n.css("padding",i+"px 0");setStatusPosition()}function setStatusPosition(){for(var i=jq("#userProfilePhoto"),r=i.children("img"),t=i.siblings(".profile-status"),n=0,u=t.length;n<u;n++)jq(t[n]).css({top:(r.outerHeight()-jq(t[n]).outerHeight())/2,left:(i.width()-jq(t[n]).outerWidth())/2}),jq(t[n]).attr("data-visible")!=="hidden"&&jq(t[n]).show()}function logOutAllConnectionsForUser(n){Teamlab.logoutAllActiveConnectionsForUser({},n,{success:function(n,t){t?toastr.success(ASC.Resources.Master.ResourceJS.ActiveConnectionsWasLoggedOut):toastr.error(ASC.Resources.Master.ResourceJS.OperationFailedError)},error:function(){toastr.error(ASC.Resources.Master.ResourceJS.OperationFailedError)}})}var tenantQuota,initTenantQuota,SendInstrunctionsToRemoveProfile;jq(function(){initActionMenu();initTenantQuota();initBorderPhoto();jq("#userProfilePhoto img").on("load",function(){initBorderPhoto();LoadingBanner.hideLoading()});jq("#loadPhotoImage").on("click",function(){ASC.Controls.LoadPhotoImage.showDialog()});if(jq("#studio_emailChangeDialog").length==0)jq(".profile-status.pending div").css("cursor","default");else{jq("#linkNotActivatedActivation").on("click",function(){var n=jq("#studio_userProfileCardInfo").attr("data-email"),t=jq("#studio_userProfileCardInfo").attr("data-id");return ASC.EmailOperationManager.sendEmailActivationInstructions(n,t,onActivateEmail.bind(null,n)),!1});jq("#imagePendingActivation, #linkPendingActivation, #linkPendingEmailChange").on("click",function(){var n=jq("#studio_userProfileCardInfo").attr("data-email"),t=jq("#studio_userProfileCardInfo").attr("data-id");return ASC.EmailOperationManager.showResendInviteWindow(n,t,Teamlab.profile.isAdmin,onActivateEmail.bind(null,n)),!1})}jq.switcherAction("#switcherAccountLinks",".account-links");jq.switcherAction("#switcherLoginSettings","#loginSettingsContainer");jq.switcherAction("#switcherCommentButton","#commentContainer");jq.switcherAction("#switcherContactsPhoneButton","#contactsPhoneContainer");jq.switcherAction("#switcherContactsSocialButton","#contactsSocialContainer");jq.switcherAction("#switcherSubscriptionButton","#subscriptionContainer");jq.switcherAction("#switcherConnectionsButton","#connectionsContainer")});tenantQuota={};initTenantQuota=function(){Teamlab.getQuotas({},{success:function(n,t){tenantQuota=t},error:function(){}})};SendInstrunctionsToRemoveProfile=function(){Teamlab.removeSelf({},{success:function(n,t){jq.unblockUI();toastr.success(t)}})};
window.ASC.Controls.LoadPhotoImage=function(){var f,b,r,u,o=null,k=[0,0],it=[0,0],rt=1,n,l,a,e,ut,ft,i,v,s=!1,h=null,t=null,p=function(){i[0].onload=null;i.attr({alt:"",style:"",src:""});o&&o.destroy()},et=function(){p();h=null;t=u;StudioBlockUIManager.blockUI(n,450);r?(y(!0),tt(r,!1)):(y(!1),StudioBlockUIManager.blockUI(n,450))},c=function(){p();PopupKeyUpActionProvider.CloseDialog()},d=function(t){if(t){n.find(".save-btn").addClass("disable");var i=e.parent(),r=i.outerHeight()/2-e.outerHeight()/2,u=i.outerWidth()/2-e.outerWidth()/2;e.removeClass("display-none").css("top",r).css("left",u)}else n.find(".save-btn").removeClass("disable"),e.addClass("display-none")},y=function(n){n?(l.addClass("display-none"),a.removeClass("display-none"),s=!1):(l.removeClass("display-none"),a.addClass("display-none"),s=!0);d(!1)},ot=function(){y(!1);StudioBlockUIManager.blockUI(n,450)},st=function(){function p(n,t){console.log(t);var i=t[0];i!=null&&toastr.error(i)}function k(n,i){v.attr("src",w(i.max));r=s?null:w(i.original);u=t;toastr.success(ASC.Resources.Master.ResourceJS.ChangesApplied);c()}function d(){LoadingBanner.showLoaderBtn(n)}function g(){LoadingBanner.hideLoaderBtn(n)}var l,y;if(!jq(this).hasClass("disable")){if(!o){c();return}var a=jq("#userProfilePhoto"),v=a.find("img"),e=o.tellScaled();if(!e.w||!e.h){toastr.warning(ASC.Resources.Master.ResourceJS.EmptySelectedArea);return}if(l=i[0].naturalWidth/i.width(),t={point:{x:parseInt(e.x*l),y:parseInt(e.y*l)},size:{width:parseInt(e.w*l),height:parseInt(e.h*l)}},!f){s?(a.removeClass("preview"),v.attr("src",b).removeAttr("style"),r=null):(a.addClass("preview"),nt(v,e),r=h||r);u=t;c();return}y={before:d,error:p,success:k,after:g};s?Teamlab.removeUserPhoto({},f,y):Teamlab.createUserPhotoThumbnails({},f,{tmpFile:h,x:t.point.x,y:t.point.y,width:t.size.width,height:t.size.height},y)}},ht=function(){function i(){return!0}function r(n,t){var i=JSON.parse(t);i.Success?(h=i.Data,p(),y(!0),tt(h,!0)):(console.log(i.Message),toastr.error(i.Message))}var t="ajaxupload.ashx?type=ASC.Web.People.UserPhotoUploader,ASC.Web.People"+(f?"&userId="+f:"");ut=new AjaxUpload(l.find(".upload-btn"),{action:t,autoSubmit:!0,onChange:i,onComplete:r,parentDialog:n,isInPopup:!0});ft=new AjaxUpload(a.find(".upload-btn"),{action:t,autoSubmit:!0,onChange:i,onComplete:r,parentDialog:n,isInPopup:!0})},g=function(n){if(v&&v.length){if(!n||!n.w||!n.h){d(!0);return}v.each(function(){nt(jq(this),n)})}},nt=function(n,t){n.attr("src",i.attr("src"));var r=n.parent().width()/t.w,u=n.parent().height()/t.h;r!=Infinity&&u!=Infinity&&n.css({width:Math.round(r*i.width())+"px",height:Math.round(u*i.height())+"px",marginLeft:"-"+Math.round(r*t.x)+"px",marginTop:"-"+Math.round(u*t.y)+"px"})},tt=function(r,u){i[0].onload=function(){var r=this.naturalWidth/i.width();if(u){var s=parseInt(Math.max(this.naturalWidth,this.naturalHeight)),f=parseInt(Math.min(this.naturalWidth,this.naturalHeight)),e=(s-f)/2;t={point:this.naturalWidth>=this.naturalHeight?{x:e,y:0}:{x:0,y:e},size:{width:f,height:f}}}i.Jcrop({onChange:g,onSelect:g,setSelect:[parseInt(t.point.x/r),parseInt(t.point.y/r),parseInt((t.point.x+t.size.width)/r),parseInt((t.point.y+t.size.height)/r)],minSize:k,maxSize:it,aspectRatio:rt},function(){o=this;var t=n.find(".jcrop-holder .jcrop-tracker:first");t.append(jq("<div class='jcrop-circle'><\/div>"))});StudioBlockUIManager.blockUI(n,450)};i.attr({alt:"",style:"",src:w(r)})},w=function(n){return n+(n.indexOf("?")==-1?"?":"&")+"_="+(new Date).getTime()},ct=function(t,o,s,h,y){f=t;b=y;r=h;u=s;k=o;n=jq("#userPhotoDialog");l=n.find(".empty-block");a=n.find(".preview-block");e=n.find(".empty-selection");i=n.find(".preview-block img");v=null;ht();n.find(".cancel-btn").on("click",c);n.find(".delete-btn").on("click",ot);n.find(".save-btn").on("click",st)},lt=function(n,t){r?Teamlab.createUserPhotoThumbnails({},n,{tmpFile:r,x:u.point.x,y:u.point.y,width:u.size.width,height:u.size.height},{after:t}):t()};return{init:ct,showDialog:et,closeDialog:c,save:lt}}();
(function(n){n.Jcrop=function(t,i){function h(n){return Math.round(n)+"px"}function ft(n){return r.baseClass+"-"+n}function bi(){return n.fx.step.hasOwnProperty("backgroundColor")}function et(t){var i=n(t).offset();return[i.left,i.top]}function nt(n){return[n.pageX-b[0],n.pageY-b[1]]}function ni(t){typeof t!="object"&&(t={});r=n.extend(r,t);n.each(["onChange","onSelect","onRelease","onDblClick"],function(n,t){typeof r[t]!="function"&&(r[t]=function(){})})}function ti(n,t,i){if(b=et(e),p.setCursor(n==="move"?n:n+"-resize"),n==="move")return p.activateHandlers(di(t),pt,i);var u=s.getFixed(),r=ii(n),f=s.getCorner(ii(r));s.setPressed(s.getCorner(r));s.setCurrent(f);p.activateHandlers(ki(n,u),pt,i)}function ki(n,t){return function(i){if(r.aspectRatio)switch(n){case"e":i[1]=t.y+1;break;case"w":i[1]=t.y+1;break;case"n":i[0]=t.x+1;break;case"s":i[0]=t.x+1}else switch(n){case"e":i[1]=t.y2;break;case"w":i[1]=t.y2;break;case"n":i[0]=t.x2;break;case"s":i[0]=t.x2}s.setCurrent(i);u.update()}}function di(n){var t=n;return gt.watchKeys(),function(n){s.moveOffset([n[0]-t[0],n[1]-t[1]]);t=n;u.update()}}function ii(n){switch(n){case"n":return"sw";case"s":return"nw";case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne"}}function ri(n){return function(t){return r.disabled?!1:n==="move"&&!r.allowMove?!1:(b=et(e),ut=!0,ti(n,nt(t)),t.stopPropagation(),t.preventDefault(),!1)}}function ui(n,t,i){var r=n.width(),u=n.height();r>t&&t>0&&(r=t,u=t/n.width()*n.height());u>i&&i>0&&(u=i,r=i/n.height()*n.width());l=n.width()/r;a=n.height()/u;n.width(r).height(u)}function ot(n){return{x:n.x*l,y:n.y*a,x2:n.x2*l,y2:n.y2*a,w:n.w*l,h:n.h*a}}function pt(){var n=s.getFixed();n.w>r.minSelect[0]&&n.h>r.minSelect[1]?(u.enableHandles(),u.done()):u.release();p.setCursor(r.allowSelect?"crosshair":"default")}function fi(n){if(r.disabled||!r.allowSelect)return!1;ut=!0;b=et(e);u.disableHandles();p.setCursor("crosshair");var t=nt(n);return s.setPressed(t),u.update(),p.activateHandlers(gi,pt,n.type.substring(0,5)==="touch"),gt.watchKeys(),n.stopPropagation(),n.preventDefault(),!1}function gi(n){s.setCurrent(n);u.update()}function ei(){var t=n("<div><\/div>").addClass(ft("tracker"));return ai&&t.css({opacity:0,backgroundColor:"white"}),t}function nr(n){w.removeClass().addClass(ft("holder")).addClass(n)}function tr(n,t){function b(){window.setTimeout(k,d)}var c=n[0]/l,y=n[1]/a,p=n[2]/l,w=n[3]/a,k;if(!dt){var o=s.flipCoords(c,y,p,w),h=s.getFixed(),e=[h.x,h.y,h.x2,h.y2],i=e,d=r.animationDelay,g=o[0]-e[0],nt=o[1]-e[1],tt=o[2]-e[2],it=o[3]-e[3],f=0,rt=r.swingSpeed;c=i[0];y=i[1];p=i[2];w=i[3];u.animMode(!0);k=function(){return function(){f+=(100-f)/rt;i[0]=Math.round(c+f/100*g);i[1]=Math.round(y+f/100*nt);i[2]=Math.round(p+f/100*tt);i[3]=Math.round(w+f/100*it);f>=99.8&&(f=100);f<100?(si(i),b()):(u.done(),u.animMode(!1),typeof t=="function"&&t.call(v))}}();b()}}function oi(n){si([n[0]/l,n[1]/a,n[2]/l,n[3]/a]);r.onSelect.call(v,ot(s.getFixed()));u.enableHandles()}function si(n){s.setPressed([n[0],n[1]]);s.setCurrent([n[2],n[3]]);u.update()}function ir(){return ot(s.getFixed())}function rr(){return s.getFixed()}function ur(n){ni(n);bt()}function hi(){r.disabled=!0;u.disableHandles();u.setCursor("default");p.setCursor("default")}function ci(){r.disabled=!1;bt()}function fr(){u.done();p.activateHandlers(null,null)}function er(){w.remove();c.show();c.css("visibility","visible");n(t).removeData("Jcrop")}function or(n,t){u.release();hi();var i=new Image;i.onload=function(){var u=i.width,s=i.height,h=r.boxWidth,c=r.boxHeight;e.width(u).height(s);e.attr("src",n);k.attr("src",n);ui(e,h,c);o=e.width();f=e.height();k.width(o).height(f);d.width(o+rt*2).height(f+rt*2);w.width(o).height(f);g.resize(o,f);ci();typeof t=="function"&&t.call(v)};i.src=n}function wt(n,t,i){var u=t||r.bgColor;r.bgFade&&bi()&&r.fadeTime&&!i?n.animate({backgroundColor:u},{queue:!1,duration:r.fadeTime}):n.css("backgroundColor",u)}function bt(n){r.allowResize?n?u.enableOnly():u.enableHandles():u.disableHandles();p.setCursor(r.allowSelect?"crosshair":"default");u.setCursor(r.allowMove?"move":"default");r.hasOwnProperty("trueSize")&&(l=r.trueSize[0]/o,a=r.trueSize[1]/f);r.hasOwnProperty("setSelect")&&(oi(r.setSelect),u.done(),delete r.setSelect);g.refresh();r.bgColor!=pi&&(wt(r.shade?g.getShades():w,r.shade?r.shadeColor||r.bgColor:r.bgColor),pi=r.bgColor);st!=r.bgOpacity&&(st=r.bgOpacity,r.shade?g.refresh():u.setBgOpacity(st));ht=r.maxSize[0]||0;ct=r.maxSize[1]||0;lt=r.minSize[0]||0;at=r.minSize[1]||0;r.hasOwnProperty("outerImage")&&(e.attr("src",r.outerImage),delete r.outerImage);u.refresh()}var r=n.extend({},n.Jcrop.defaults),b,li=navigator.userAgent.toLowerCase(),ai=/msie/.test(li),vi=/msie [1-6]\./.test(li),vt,e,v;typeof t!="object"&&(t=n(t)[0]);typeof i!="object"&&(i={});ni(i);var kt={border:"none",visibility:"visible",margin:0,padding:0,position:"absolute",top:0,left:0},c=n(t),yi=!0;t.tagName=="IMG"?(c[0].width!=0&&c[0].height!=0?(c.width(c[0].width),c.height(c[0].height)):(vt=new Image,vt.src=c[0].src,c.width(vt.width),c.height(vt.height)),e=c.clone().removeAttr("id").css(kt).show(),e.width(c.width()),e.height(c.height()),c.after(e).hide()):(e=c.css(kt).show(),yi=!1,r.shade===null&&(r.shade=!0));ui(e,r.boxWidth,r.boxHeight);var o=e.width(),f=e.height(),w=n("<div />").width(o).height(f).addClass(ft("holder")).css({position:"relative",backgroundColor:r.bgColor}).insertAfter(c).append(e);r.addClass&&w.addClass(r.addClass);var k=n("<div />"),yt=n("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),tt=n("<div />").width("100%").height("100%").css("zIndex",320),it=n("<div />").css({position:"absolute",zIndex:600}).dblclick(function(){var n=s.getFixed();r.onDblClick.call(v,n)}).insertBefore(e).append(yt,tt);yi&&(k=n("<img />").attr("src",e.attr("src")).css(kt).width(o).height(f),yt.append(k));vi&&it.css({overflowY:"hidden"});var rt=r.boundary,d=ei().width(o+rt*2).height(f+rt*2).css({position:"absolute",top:h(-rt),left:h(-rt),zIndex:290}).mousedown(fi),pi=r.bgColor,st=r.bgOpacity,ht,ct,lt,at,l,a,ut,dt,wi;b=et(e);var y=function(){function n(){var i={},u=["touchstart","touchmove","touchend"],f=document.createElement("div"),t,n,r;try{for(t=0;t<u.length;t++)n=u[t],n="on"+n,r=n in f,r||(f.setAttribute(n,"return;"),r=typeof f[n]=="function"),i[u[t]]=r;return i.touchstart&&i.touchend&&i.touchmove}catch(e){return!1}}function t(){return r.touchSupport===!0||r.touchSupport===!1?r.touchSupport:n()}return{createDragger:function(n){return function(t){return r.disabled?!1:n==="move"&&!r.allowMove?!1:(b=et(e),ut=!0,ti(n,nt(y.cfilter(t)),!0),t.stopPropagation(),t.preventDefault(),!1)}},newSelection:function(n){return fi(y.cfilter(n))},cfilter:function(n){return n.pageX=n.originalEvent.changedTouches[0].pageX,n.pageY=n.originalEvent.changedTouches[0].pageY,n},isSupported:n,support:t()}}(),s=function(){function p(r){r=h(r);u=n=r[0];i=t=r[1]}function w(n){n=h(n);v=n[0]-u;y=n[1]-i;u=n[0];i=n[1]}function b(){return[v,y]}function k(r){var e=r[0],s=r[1];0>n+e&&(e-=e+n);0>t+s&&(s-=s+t);f<i+s&&(s+=f-(i+s));o<u+e&&(e+=o-(u+e));n+=e;u+=e;t+=s;i+=s}function d(n){var t=s();switch(n){case"ne":return[t.x2,t.y];case"nw":return[t.x,t.y];case"se":return[t.x2,t.y2];case"sw":return[t.x,t.y2]}}function s(){if(!r.aspectRatio)return g();var v=r.aspectRatio,b=r.minSize[0]/l,w=r.maxSize[0]/l,nt=r.maxSize[1]/a,k=u-n,d=i-t,tt=Math.abs(k),it=Math.abs(d),rt=tt/it,s,h,y,p;return w===0&&(w=o*10),nt===0&&(nt=f*10),rt<v?(h=i,y=it*v,s=k<0?n-y:y+n,s<0?(s=0,p=Math.abs((s-n)/v),h=d<0?t-p:p+t):s>o&&(s=o,p=Math.abs((s-n)/v),h=d<0?t-p:p+t)):(s=u,p=tt/v,h=d<0?t-p:t+p,h<0?(h=0,y=Math.abs((h-t)*v),s=k<0?n-y:y+n):h>f&&(h=f,y=Math.abs(h-t)*v,s=k<0?n-y:y+n)),s>n?(s-n<b?s=n+b:s-n>w&&(s=n+w),h=h>t?t+(s-n)/v:t-(s-n)/v):s<n&&(n-s<b?s=n-b:n-s>w&&(s=n-w),h=h>t?t+(n-s)/v:t-(n-s)/v),s<0?(n-=s,s=0):s>o&&(n-=s-o,s=o),h<0?(t-=h,h=0):h>f&&(t-=h-f,h=f),c(e(n,t,s,h))}function h(n){return n[0]<0&&(n[0]=0),n[1]<0&&(n[1]=0),n[0]>o&&(n[0]=o),n[1]>f&&(n[1]=f),[Math.round(n[0]),Math.round(n[1])]}function e(n,t,i,r){var u=n,f=i,e=t,o=r;return i<n&&(u=i,f=n),r<t&&(e=r,o=t),[u,e,f,o]}function g(){var s=u-n,h=i-t,r;return ht&&Math.abs(s)>ht&&(u=s>0?n+ht:n-ht),ct&&Math.abs(h)>ct&&(i=h>0?t+ct:t-ct),at/a&&Math.abs(h)<at/a&&(i=h>0?t+at/a:t-at/a),lt/l&&Math.abs(s)<lt/l&&(u=s>0?n+lt/l:n-lt/l),n<0&&(u-=n,n-=n),t<0&&(i-=t,t-=t),u<0&&(n-=u,u-=u),i<0&&(t-=i,i-=i),u>o&&(r=u-o,n-=r,u-=r),i>f&&(r=i-f,t-=r,i-=r),n>o&&(r=n-f,i-=r,t-=r),t>f&&(r=t-f,i-=r,t-=r),c(e(n,t,u,i))}function c(n){return{x:n[0],y:n[1],x2:n[2],y2:n[3],w:n[2]-n[0],h:n[3]-n[1]}}var n=0,t=0,u=0,i=0,v,y;return{flipCoords:e,setPressed:p,setCurrent:w,getOffset:b,moveOffset:k,getCorner:d,getFixed:s}}(),g=function(){function nt(n,t){i.left.css({height:h(t)});i.right.css({height:h(t)})}function v(){return y(s.getFixed())}function y(n){i.top.css({left:h(n.x),width:h(n.w),height:h(n.y)});i.bottom.css({top:h(n.y2),left:h(n.x),width:h(n.w),height:h(f-n.y2)});i.right.css({left:h(n.x2),width:h(o-n.x2)});i.left.css({width:h(n.x)})}function l(){return n("<div />").css({position:"absolute",backgroundColor:r.shadeColor||r.bgColor}).appendTo(t)}function p(){c||(c=!0,t.insertBefore(e),v(),u.setBgOpacity(1,0,1),k.hide(),b(r.shadeColor||r.bgColor,1),u.isAwake()?a(r.bgOpacity,1):a(1,1))}function b(n,t){wt(g(),n,t)}function d(){c&&(t.remove(),k.show(),c=!1,u.isAwake()?u.setBgOpacity(r.bgOpacity,1,1):(u.setBgOpacity(1,1,1),u.disableHandles()),wt(w,0,1))}function a(n,i){c&&(r.bgFade&&!i?t.animate({opacity:1-n},{queue:!1,duration:r.fadeTime}):t.css({opacity:1-n}))}function tt(){r.shade?p():d();u.isAwake()&&a(r.bgOpacity)}function g(){return t.children()}var c=!1,t=n("<div />").css({position:"absolute",zIndex:240,opacity:0}),i={top:l(),left:l().height(f),right:l().height(f),bottom:l()};return{update:v,updateRaw:y,getShades:g,setBgColor:b,enable:p,disable:d,resize:nt,refresh:tt,opacity:a}}(),u=function(){function nt(t){var i=n("<div />").css({position:"absolute",opacity:r.borderOpacity}).addClass(ft(t));return yt.append(i),i}function c(t,i){var r=n("<div />").mousedown(ri(t)).css({cursor:t+"-resize",position:"absolute",zIndex:i}).addClass("ord-"+t);return y.support&&r.bind("touchstart.jcrop",y.createDragger(t)),tt.append(r),r}function rt(n){var t=r.handleSize,i=c(n,d++).css({opacity:r.handleOpacity}).addClass(ft("handle"));return t&&i.width(t).height(t),i}function ut(n){return c(n,d++).addClass("jcrop-dragbar")}function et(n){for(var t=0;t<n.length;t++)ni[n[t]]=ut(n[t])}function ht(n){for(var t,i=0;i<n.length;i++){switch(n[i]){case"n":t="hline";break;case"s":t="hline bottom";break;case"e":t="vline right";break;case"w":t="vline"}kt[n[i]]=nt(t)}}function ct(n){for(var t=0;t<n.length;t++)gt[n[t]]=rt(n[t])}function lt(n,t){r.shade||k.css({top:h(-t),left:h(-n)});it.css({top:h(t),left:h(n)})}function at(n,t){it.width(Math.round(n)).height(Math.round(t))}function l(){var n=s.getFixed();s.setPressed([n.x,n.y]);s.setCurrent([n.x2,n.y2]);a()}function a(n){if(t)return p(n)}function p(n){var i=s.getFixed();at(i.w,i.h);lt(i.x,i.y);r.shade&&g.updateRaw(i);t||vt();n?r.onSelect.call(v,ot(i)):r.onChange.call(v,ot(i))}function o(n,i,u){(t||i)&&(r.bgFade&&!u?e.animate({opacity:n},{queue:!1,duration:r.fadeTime}):e.css("opacity",n))}function vt(){it.show();r.shade?g.opacity(st):o(st,!0);t=!0}function pt(){i();it.hide();r.shade?g.opacity(1):o(1);t=!1;r.onRelease.call(v)}function wt(){u&&tt.show()}function w(){return u=!0,r.allowResize?(tt.show(),!0):void 0}function i(){u=!1;tt.hide()}function b(n){n?(dt=!0,i()):(dt=!1,w())}function bt(){b(!1);l()}var t,d=370,kt={},gt={},ni={},u=!1,f;return r.dragEdges&&n.isArray(r.createDragbars)&&et(r.createDragbars),n.isArray(r.createHandles)&&ct(r.createHandles),r.drawBorders&&n.isArray(r.createBorders)&&ht(r.createBorders),n(document).bind("touchstart.jcrop-ios",function(t){n(t.currentTarget).hasClass("jcrop-tracker")&&t.stopPropagation()}),f=ei().mousedown(ri("move")).css({cursor:"move",position:"absolute",zIndex:360}),y.support&&f.bind("touchstart.jcrop",y.createDragger("move")),yt.append(f),i(),{updateVisible:a,update:p,release:pt,refresh:l,isAwake:function(){return t},setCursor:function(n){f.css("cursor",n)},enableHandles:w,enableOnly:function(){u=!0},showHandles:wt,disableHandles:i,animMode:b,setBgOpacity:o,done:bt}}(),p=function(){function c(i){d.css({zIndex:450});i?n(document).bind("touchmove.jcrop",p).bind("touchend.jcrop",w):h&&n(document).bind("mousemove.jcrop",o).bind("mouseup.jcrop",t)}function l(){d.css({zIndex:290});n(document).unbind(".jcrop")}function o(n){return i(nt(n)),!1}function t(n){return n.preventDefault(),n.stopPropagation(),ut&&(ut=!1,f(nt(n)),u.isAwake()&&r.onSelect.call(v,ot(s.getFixed())),l(),i=function(){},f=function(){}),!1}function a(n,t,r){return ut=!0,i=n,f=t,c(r),!1}function p(n){return i(nt(y.cfilter(n))),!1}function w(n){return t(y.cfilter(n))}function b(n){d.css("cursor",n)}var i=function(){},f=function(){},h=r.trackDocument;return h||d.mousemove(o).mouseup(t).mouseout(t),e.before(d),{activateHandlers:a,setCursor:b}}(),gt=function(){function f(){r.keySupport&&(t.show(),t.focus())}function o(){t.hide()}function i(n,t,i){r.allowMove&&(s.moveOffset([t,i]),u.updateVisible(!0));n.preventDefault();n.stopPropagation()}function h(n){if(n.ctrlKey||n.metaKey)return!0;wi=n.shiftKey?!0:!1;var t=wi?10:1;switch(n.keyCode){case 37:i(n,-t,0);break;case 39:i(n,t,0);break;case 38:i(n,0,-t);break;case 40:i(n,0,t);break;case 27:r.allowSelect&&u.release();break;case 9:return!0}return!1}var t=n('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}).addClass("jcrop-keymgr"),c=n("<div />").css({position:"absolute",overflow:"hidden"}).append(t);return r.keySupport&&(t.keydown(h).blur(o),vi||!r.fixedSupport?(t.css({position:"absolute",left:"-20px"}),c.append(t).insertBefore(e)):t.insertBefore(e)),{watchKeys:f}}();return y.support&&d.bind("touchstart.jcrop",y.newSelection),tt.hide(),bt(!0),v={setImage:or,animateTo:tr,setSelect:oi,setOptions:ur,tellSelect:ir,tellScaled:rr,setClass:nr,disable:hi,enable:ci,cancel:fr,release:u.release,destroy:er,focus:gt.watchKeys,getBounds:function(){return[o*l,f*a]},getWidgetSize:function(){return[o,f]},getScaleFactor:function(){return[l,a]},getOptions:function(){return r},ui:{holder:w,selection:it}},ai&&w.bind("selectstart",function(){return!1}),c.data("Jcrop",v),v};n.fn.Jcrop=function(t,i){var r;return this.each(function(){if(n(this).data("Jcrop")){if(t==="api")return n(this).data("Jcrop");n(this).data("Jcrop").setOptions(t)}else this.tagName=="IMG"?n.Jcrop.Loader(this,function(){n(this).css({display:"block",visibility:"hidden"});r=n.Jcrop(this,t);n.isFunction(i)&&i.call(r)}):(n(this).css({display:"block",visibility:"hidden"}),r=n.Jcrop(this,t),n.isFunction(i)&&i.call(r))}),this};n.Jcrop.Loader=function(t,i,r){function e(){f.complete?(u.unbind(".jcloader"),n.isFunction(i)&&i.call(f)):window.setTimeout(e,50)}var u=n(t),f=u[0];u.bind("load.jcloader",e).bind("error.jcloader",function(){u.unbind(".jcloader");n.isFunction(r)&&r.call(f)});f.complete&&n.isFunction(i)&&(u.unbind(".jcloader"),i.call(f))};n.Jcrop.defaults={allowSelect:!0,allowMove:!0,allowResize:!0,trackDocument:!0,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:.6,bgFade:!1,borderOpacity:.4,handleOpacity:.5,handleSize:null,aspectRatio:0,keySupport:!0,createHandles:["n","s","e","w","nw","ne","se","sw"],createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:!0,dragEdges:!0,fixedSupport:!0,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}}})(jQuery);
jq(function(){jq.dropdownToggle({dropdownID:"languageMenu",switcherSelector:".usrLang",addTop:4,addLeft:-17,showFunction:function(n,t){t.is(":hidden")?n.addClass("active"):n.removeClass("active")},hideFunction:function(){jq(".languageMenu.active").removeClass("active")}});jq(".languageMenu ul.options li.option").on("click",function(){var n=jq(this).attr("data"),t;if(!n){jq("#languageMenu").hide();t=jq(".usrLang").next(".HelpCenterSwitcher");t.length&&setTimeout(function(){t.helper({BlockHelperID:"NotFoundLanguage"})},0);return}AjaxPro.UserLangController.SaveUserLanguageSettings(n,function(t){var r,i;jq("#languageMenu").hide();r=jq("#languageMenu").find("li."+n);r.length==1&&(jq(".usrLang").attr("class","field-value usrLang active "+n),jq(".usrLang>.val").text(r.children("a").html()));i=t.value;i.Status==1?(LoadingBanner.displayLoading(),window.location.reload(!0)):i.Status==0&&toastr.error(i.Message)})})});
window.ASC.Controls.UserMobilePhoneManager=function(){var n=function(){jq("#changeMobileContent").show();jq("#changeMobileProgress, #changeMobileResult").hide();StudioBlockUIManager.blockUI("#studio_mobilePhoneChangeDialog",400);PopupKeyUpActionProvider.EnterAction="jq(\"#changeMobileSend\").trigger('click');"},t=function(){jq("#changeMobileContent").hide();jq("#changeMobileProgress").show();var n=jq("#hiddenUserInfoId").val();AjaxPro.ChangeMobileNumber.SendNotificationToChange(n,function(t){t.error?(toastr.error(t.error.Message),PopupKeyUpActionProvider.CloseDialog()):(n&&(jq("#changeMobileProgress").hide(),jq("#changeMobileResult").show()),t.value.length?window.location.href=t.value:window.location.reload(!0))})};return{openDialog:n,sendNotify:t}}(),function(){jq(function(){jq("#changeMobileSend").on("click",function(){ASC.Controls.UserMobilePhoneManager.sendNotify()})})}();
var PasswordTool=new function(){this.ShowPwdReminderDialog=function(n,t){n==1?(jq("#pswdRecoveryDialogPopupHeader").hide(),jq("#pswdRecoveryDialogText").hide(),jq("#pswdChangeDialogPopupHeader").show(),jq("#pswdChangeDialogText").show(),jq("#studio_emailPwdReminder").val(t),jq("#studio_pwdReminderDialog [name='userEmail']").attr("href","../../addons/mail/#composeto/email="+t).html(t)):(jq("#pswdRecoveryDialogPopupHeader").show(),jq("#pswdRecoveryDialogText").show(),jq("#pswdChangeDialogPopupHeader").hide(),jq("#pswdChangeDialogText").hide());jq("#"+jq("#studio_pwdReminderInfoID").val()).html("<div><\/div>");jq("#"+jq("#studio_pwdReminderInfoID").val()).hide();StudioBlockUIManager.blockUI("#studio_pwdReminderDialog",350);PopupKeyUpActionProvider.EnterAction="PasswordTool.RemindPwd();";var i=jq("#login").val();i!=null&&i!=undefined&&jq.isValidEmail(i)&&jq("#studio_emailPwdReminder").val(i)};this.RemindPwd=function(){Teamlab.remindPwd({},jq("#studio_emailPwdReminder").val().trim(),{before:function(){LoadingBanner.showLoaderBtn("#studio_pwdReminderDialog")},after:function(){LoadingBanner.hideLoaderBtn("#studio_pwdReminderDialog")},success:function(n,t){jq.unblockUI();typeof onSuccessRemindPwd=="function"&&onSuccessRemindPwd();toastr.success(t)},error:function(n,t){toastr.error(t[0])}});PopupKeyUpActionProvider.ClearActions()}};
typeof ASC=="undefined"&&(ASC={});typeof ASC.ZopimLiveChat=="undefined"&&(ASC.ZopimLiveChat={});ASC.ZopimLiveChat=function(){var t,i=null,r=0,o=100,n=jq("#liveChatSwitch .switch-btn"),s=function(i){if(n.length){t=i;jq("#liveChatSwitch").on("click",function(){if(!jq(this).hasClass("disabled")){if(window.$zopim===undefined||window.$zopim.livechat===undefined){jq(this).addClass("disabled");u();return}e(localStorage.getItem("livechat")==="off")}});localStorage.getItem("livechat")==="on"&&(jq("#liveChatSwitch").addClass("disabled"),u())}},u=function(){window.$zopim||function(n,i){var r=$zopim=function(n){r._.push(n)},u=r.s=n.createElement(i),e=n.getElementsByTagName(i)[0];r.set=function(n){r.set._.push(n)};r._=[];r.set._=[];u.async=!0;u.setAttribute("charset","utf-8");u.src="https://v2.zopim.com/?"+t;r.t=+new Date;u.type="text/javascript";u.onload=f;e.parentNode.insertBefore(u,e)}(document,"script")},f=function(){if(clearTimeout(i),r<o){if(window.$zopim.livechat===undefined){console.log("livechat undefined");i=setTimeout(f,200);r+=1;return}e(!0)}},e=function(t){jq("#liveChatSwitch").removeClass("disabled");t?(n.addClass("switch-on"),$zopim.livechat.setDisableSound(!1),$zopim.livechat.window.hide(),localStorage.setItem("livechat","on")):(n.removeClass("switch-on"),$zopim.livechat.setDisableSound(!0),$zopim.livechat.hideAll(),localStorage.setItem("livechat","off"))};return{init:s}}();

